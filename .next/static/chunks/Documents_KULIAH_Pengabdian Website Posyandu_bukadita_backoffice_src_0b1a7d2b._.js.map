{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus%20TUF%20Gaming/Documents/KULIAH/Pengabdian%20Website%20Posyandu/bukadita_backoffice/src/components/admin/MaterialPreview.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { FileText, ImageIcon, Download } from \"lucide-react\";\r\nimport { type Poin, type MediaItem } from \"@/lib/api\";\r\n\r\ninterface MaterialPreviewProps {\r\n  poins: Poin[];\r\n  materialTitle: string;\r\n}\r\n\r\nexport default function MaterialPreview({ poins, materialTitle }: MaterialPreviewProps) {\r\n  const [imageErrors, setImageErrors] = useState<Set<string>>(new Set());\r\n\r\n\r\n\r\n  const getPoinMedia = (poin: Poin): MediaItem[] => {\r\n    return poin.poin_media || [];\r\n  };\r\n\r\n  // Process HTML content with media placeholders\r\n  const processContentWithMedia = (html: string, media: MediaItem[]) => {\r\n    if (!html) return { processedHtml: '', hasMedia: false };\r\n\r\n    let processedHtml = html;\r\n    let hasMediaPlaceholders = false;\r\n\r\n    // First, try to find and replace media placeholders by matching media ID\r\n    media.forEach((mediaItem) => {\r\n\r\n      // Try with media ID first (for new content)\r\n      const mediaIdPlaceholderPattern = new RegExp(`\\\\[MEDIA_PLACEHOLDER_${mediaItem.id}\\\\]`, 'g');\r\n      const mediaIdDivPattern = new RegExp(\r\n        `<div[^>]*data-block-id=\"${mediaItem.id}\"[^>]*>\\\\[MEDIA_PLACEHOLDER_${mediaItem.id}\\\\]</div>`,\r\n        'g'\r\n      );\r\n\r\n      if (processedHtml.includes(`MEDIA_PLACEHOLDER_${mediaItem.id}`)) {\r\n        hasMediaPlaceholders = true;\r\n        const mediaHtml = generateMediaHtml(mediaItem);\r\n        processedHtml = processedHtml.replace(mediaIdDivPattern, mediaHtml);\r\n        processedHtml = processedHtml.replace(mediaIdPlaceholderPattern, mediaHtml);\r\n      }\r\n    });\r\n\r\n    // If no placeholders found with media IDs, try to find any MEDIA_PLACEHOLDER and match by order\r\n    if (!hasMediaPlaceholders) {\r\n      const placeholderMatches = [...processedHtml.matchAll(/<div[^>]*data-block-type=\"media\"[^>]*data-block-order=\"(\\d+)\"[^>]*>\\[MEDIA_PLACEHOLDER_([^\\]]+)\\]<\\/div>/g)];\r\n\r\n      if (placeholderMatches.length > 0) {\r\n        hasMediaPlaceholders = true;\r\n\r\n        // Sort placeholders by order and media by created_at (to maintain input order)\r\n        const sortedMedia = [...media].sort((a, b) => {\r\n          if (a.created_at && b.created_at) {\r\n            return new Date(a.created_at).getTime() - new Date(b.created_at).getTime();\r\n          }\r\n          return 0; // Keep original order if no created_at\r\n        });\r\n\r\n        placeholderMatches\r\n          .sort((a, b) => parseInt(a[1]) - parseInt(b[1])) // Sort by data-block-order\r\n          .forEach((match, index) => {\r\n            if (sortedMedia[index]) {\r\n              const mediaHtml = generateMediaHtml(sortedMedia[index]);\r\n              processedHtml = processedHtml.replace(match[0], mediaHtml);\r\n            }\r\n          });\r\n      }\r\n    }\r\n\r\n    // If still no placeholders found, try to find any MEDIA_PLACEHOLDER and replace sequentially\r\n    if (!hasMediaPlaceholders) {\r\n      const anyPlaceholderPattern = /\\[MEDIA_PLACEHOLDER_[^\\]]+\\]/g;\r\n      const placeholderMatches = processedHtml.match(anyPlaceholderPattern);\r\n\r\n      if (placeholderMatches && placeholderMatches.length > 0) {\r\n        hasMediaPlaceholders = true;\r\n\r\n        // Sort media by created_at to maintain input order\r\n        const sortedMedia = [...media].sort((a, b) => {\r\n          if (a.created_at && b.created_at) {\r\n            return new Date(a.created_at).getTime() - new Date(b.created_at).getTime();\r\n          }\r\n          return 0;\r\n        });\r\n\r\n        placeholderMatches.forEach((placeholder, index) => {\r\n          if (sortedMedia[index]) {\r\n            const mediaHtml = generateMediaHtml(sortedMedia[index]);\r\n            processedHtml = processedHtml.replace(placeholder, mediaHtml);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    return { processedHtml, hasMedia: hasMediaPlaceholders || media.length > 0 };\r\n  };\r\n\r\n  const generateMediaHtml = (media: MediaItem): string => {\r\n    const mimeType = media.mime_type;\r\n\r\n    if (mimeType?.startsWith('image/')) {\r\n      return `\r\n        <div class=\"my-4\">\r\n          <div class=\"relative\">\r\n            <img \r\n              src=\"${media.file_url}\" \r\n              alt=\"${media.caption || 'Gambar'}\"\r\n              class=\"w-full max-w-3xl rounded-lg shadow-sm\"\r\n              loading=\"lazy\"\r\n              style=\"display: none;\"\r\n              onload=\"this.style.display='block'; this.nextElementSibling.style.display='none';\"\r\n              onerror=\"this.style.display='none'; this.nextElementSibling.innerHTML='<div class=&quot;bg-gray-100 rounded-lg flex items-center justify-center h-32&quot;><div class=&quot;text-center text-gray-500&quot;><p class=&quot;text-sm&quot;>Gambar tidak dapat dimuat</p></div></div>';\"\r\n            />\r\n            <div class=\"bg-gray-50 rounded-lg flex items-center justify-center h-32\">\r\n              <div class=\"text-center text-gray-500\">\r\n                <div class=\"animate-spin w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full mx-auto mb-2\"></div>\r\n                <p class=\"text-sm\">Memuat gambar...</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          ${media.caption ? `<p class=\"text-sm text-gray-600 mt-2 italic\">${media.caption}</p>` : ''}\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    if (mimeType?.startsWith('video/')) {\r\n      return `\r\n        <div class=\"my-4\">\r\n          <video src=\"${media.file_url}\" controls class=\"w-full max-w-3xl rounded-lg shadow-sm\" preload=\"metadata\">\r\n            Browser tidak mendukung video.\r\n          </video>\r\n          ${media.caption ? `<p class=\"text-sm text-gray-600 mt-2 italic\">${media.caption}</p>` : ''}\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    if (mimeType?.startsWith('audio/')) {\r\n      return `\r\n        <div class=\"my-4\">\r\n          <audio src=\"${media.file_url}\" controls class=\"w-full max-w-md\" preload=\"metadata\">Browser tidak mendukung audio.</audio>\r\n          ${media.caption ? `<p class=\"text-sm text-gray-600 mt-2 italic\">${media.caption}</p>` : ''}\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    // Other file types\r\n    return `\r\n      <div class=\"my-4\">\r\n        <a href=\"${media.file_url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"inline-flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\">\r\n          ${mimeType === 'application/pdf' ? 'Buka PDF' : 'Download File'}\r\n        </a>\r\n        ${media.caption ? `<p class=\"text-sm text-gray-600 mt-2 italic\">${media.caption}</p>` : ''}\r\n      </div>\r\n    `;\r\n  };\r\n\r\n\r\n\r\n  const renderMediaItem = (media: MediaItem) => {\r\n    const mimeType = media.mime_type;\r\n\r\n    if (mimeType?.startsWith('image/')) {\r\n      if (imageErrors.has(media.id)) {\r\n        return (\r\n          <div className=\"bg-gray-100 border border-gray-200 rounded-lg flex items-center justify-center h-32\">\r\n            <div className=\"text-center text-gray-500\">\r\n              <ImageIcon className=\"w-8 h-8 mx-auto mb-2\" />\r\n              <p className=\"text-sm\">Gambar tidak dapat dimuat</p>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      return (\r\n        <div className=\"relative\">\r\n          <Image\r\n            src={media.file_url}\r\n            alt={media.caption || 'Gambar'}\r\n            width={800}\r\n            height={600}\r\n            className=\"w-full max-w-3xl rounded-lg shadow-sm\"\r\n            unoptimized\r\n            onError={() => setImageErrors(prev => new Set(prev).add(media.id))}\r\n            onLoad={() => {\r\n              setImageErrors(prev => {\r\n                const newSet = new Set(prev);\r\n                newSet.delete(media.id);\r\n                return newSet;\r\n              });\r\n            }}\r\n          />\r\n          {media.caption && <p className=\"text-sm text-gray-600 mt-2 italic\">{media.caption}</p>}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (mimeType?.startsWith('video/')) {\r\n      return (\r\n        <div>\r\n          <video src={media.file_url} controls className=\"w-full max-w-3xl rounded-lg shadow-sm\" preload=\"metadata\">\r\n            Browser tidak mendukung video.\r\n          </video>\r\n          {media.caption && <p className=\"text-sm text-gray-600 mt-2 italic\">{media.caption}</p>}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (mimeType?.startsWith('audio/')) {\r\n      return (\r\n        <div>\r\n          <audio src={media.file_url} controls className=\"w-full max-w-md\" preload=\"metadata\">Browser tidak mendukung audio.</audio>\r\n          {media.caption && <p className=\"text-sm text-gray-600 mt-2 italic\">{media.caption}</p>}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <a href={media.file_url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"inline-flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\">\r\n          <Download className=\"w-4 h-4\" />\r\n          {mimeType === 'application/pdf' ? 'Buka PDF' : 'Download File'}\r\n        </a>\r\n        {media.caption && <p className=\"text-sm text-gray-600 mt-2 italic\">{media.caption}</p>}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const sortedPoins = [...poins].sort((a, b) => (a.order_index || 0) - (b.order_index || 0));\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200\">\r\n      <div className=\"p-6 border-b border-gray-200\">\r\n        <h2 className=\"text-xl font-bold text-gray-900\">Preview: {materialTitle}</h2>\r\n        <p className=\"text-sm text-gray-600 mt-1\">{poins.length} poin pembelajaran tersedia</p>\r\n      </div>\r\n\r\n      <div className=\"divide-y divide-gray-200\">\r\n        {sortedPoins.map((poin, index) => {\r\n          const media = getPoinMedia(poin);\r\n          const { processedHtml, hasMedia } = processContentWithMedia(poin.content_html, media);\r\n\r\n          return (\r\n            <div key={poin.id} className=\"p-6\">\r\n              <div className=\"mb-4\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900\">{index + 1}. {poin.title}</h3>\r\n                  {poin.duration_label && (<span className=\"text-xs text-blue-600 bg-blue-100 px-3 py-1 rounded-full font-medium\">{poin.duration_label}</span>)}\r\n                  {poin.duration_minutes && (<span className=\"text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full\">{poin.duration_minutes} menit</span>)}\r\n                  {hasMedia && (<span className=\"text-xs text-green-600 bg-green-100 px-3 py-1 rounded-full font-medium\">ðŸ“Ž {media.length} Media</span>)}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"prose prose-sm max-w-none text-gray-700\">\r\n                {/* Always show processed HTML if it has meaningful content, otherwise use fallback */}\r\n                {processedHtml && processedHtml !== poin.content_html ? (\r\n                  <div dangerouslySetInnerHTML={{ __html: processedHtml }} />\r\n                ) : (\r\n                  // Fallback: show original content + media inline (no separate section header)\r\n                  <>\r\n                    <div dangerouslySetInnerHTML={{ __html: poin.content_html || '<p>Konten kosong</p>' }} />\r\n                    {media.length > 0 && (\r\n                      <div className=\"space-y-4 mt-6\">\r\n                        {/* Sort media by created_at to maintain input order */}\r\n                        {[...media]\r\n                          .sort((a, b) => {\r\n                            if (a.created_at && b.created_at) {\r\n                              return new Date(a.created_at).getTime() - new Date(b.created_at).getTime();\r\n                            }\r\n                            return 0;\r\n                          })\r\n                          .map((mediaItem) => (\r\n                            <div key={mediaItem.id} className=\"my-4\">{renderMediaItem(mediaItem)}</div>\r\n                          ))}\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {poins.length === 0 && (\r\n        <div className=\"p-12 text-center text-gray-500\">\r\n          <FileText className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\r\n          <p className=\"text-lg font-medium\">Belum ada poin untuk ditampilkan</p>\r\n          <p className=\"text-sm\">Tambahkan poin di tab &quot;Kelola Poin&quot; terlebih dahulu</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 500, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus%20TUF%20Gaming/Documents/KULIAH/Pengabdian%20Website%20Posyandu/bukadita_backoffice/src/components/admin/MaterialPoinManager.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport Swal from \"sweetalert2\";\r\nimport { ArrowLeft, Plus, Edit, Trash2, FileText, Video, ImageIcon } from \"lucide-react\";\r\nimport { poinsAPI, materialsAPI, type Poin, type Material, type MediaItem } from \"@/lib/api\";\r\nimport { renderContent } from \"@/lib/markdown-utils\";\r\n\r\nimport MaterialPreview from \"./MaterialPreview\";\r\n\r\n// Alias for backward compatibility\r\ntype PoinDetailRecord = Poin;\r\ntype MaterialRecordWithPoins = Material;\r\n\r\ninterface MaterialPoinManagerProps {\r\n  materialId: string;\r\n}\r\n\r\nexport default function MaterialPoinManager({ materialId }: MaterialPoinManagerProps) {\r\n  const router = useRouter();\r\n  const [material, setMaterial] = useState<MaterialRecordWithPoins | null>(null);\r\n  const [poins, setPoins] = useState<PoinDetailRecord[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showAddPoin, setShowAddPoin] = useState(false);\r\n  const [showEditPoin, setShowEditPoin] = useState(false);\r\n  const [editingPoin, setEditingPoin] = useState<PoinDetailRecord | null>(null);\r\n  const [imageErrors, setImageErrors] = useState<Set<string>>(new Set());\r\n\r\n  // Block-based editor interfaces\r\n  interface ContentBlock {\r\n    id: string;\r\n    type: 'text' | 'media';\r\n    order: number;\r\n    content?: string; // for text blocks\r\n    file?: File; // for media blocks\r\n    caption?: string; // for media blocks\r\n    preview?: string; // for media blocks preview\r\n  }\r\n\r\n  // Add/Edit poin form state\r\n  const [title, setTitle] = useState(\"\");\r\n  const [durationLabel, setDurationLabel] = useState(\"\");\r\n  const [durationMinutes, setDurationMinutes] = useState(\"\");\r\n  const [contentBlocks, setContentBlocks] = useState<ContentBlock[]>([\r\n    { id: '1', type: 'text', order: 0, content: '' }\r\n  ]);\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  // Edit form existing media state  \r\n  interface EditableMediaItem extends MediaItem {\r\n    captionChanged?: boolean;\r\n  }\r\n  const [existingMedia, setExistingMedia] = useState<EditableMediaItem[]>([]);\r\n  const [mediaToDelete, setMediaToDelete] = useState<string[]>([]);\r\n\r\n\r\n\r\n  // Tab state\r\n  const [activeTab, setActiveTab] = useState<'manage' | 'preview'>('manage');\r\n\r\n  // Helper function to load individual poin with media\r\n  const loadPoinWithMedia = async (poinId: string | number) => {\r\n    try {\r\n      const { apiFetch } = await import('@/lib/api/client');\r\n      const res = await apiFetch<PoinDetailRecord>(`/api/v1/admin/poins/${encodeURIComponent(String(poinId))}`, {\r\n        method: \"GET\"\r\n      });\r\n\r\n      if (res.ok) {\r\n\r\n        // Backend now includes media by default, but if not present, get from direct endpoint\r\n        if (!res.data.poin_media || res.data.poin_media.length === 0) {\r\n          try {\r\n            const mediaRes = await apiFetch<MediaItem[]>(`/api/v1/admin/poins/${encodeURIComponent(String(poinId))}/media`, {\r\n              method: \"GET\"\r\n            });\r\n\r\n            if (mediaRes.ok && mediaRes.data) {\r\n              res.data.poin_media = mediaRes.data;\r\n            }\r\n          } catch (mediaError) {\r\n            console.warn('Failed to fetch media from direct endpoint:', mediaError);\r\n          }\r\n        }\r\n\r\n        return res.data;\r\n      } else {\r\n        console.error('Failed to load poin with media:', res);\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading poin with media:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // Helper function to get media from poin (backend now consistently uses poin_media)\r\n  const getPoinMedia = (poin: PoinDetailRecord): MediaItem[] => {\r\n    return poin.poin_media || [];\r\n  };\r\n\r\n  // Block editor functions\r\n  const addTextBlock = () => {\r\n    const newBlock: ContentBlock = {\r\n      id: Date.now().toString(),\r\n      type: 'text',\r\n      order: contentBlocks.length,\r\n      content: ''\r\n    };\r\n    setContentBlocks([...contentBlocks, newBlock]);\r\n  };\r\n\r\n  const addMediaBlock = () => {\r\n    const newBlock: ContentBlock = {\r\n      id: Date.now().toString(),\r\n      type: 'media',\r\n      order: contentBlocks.length,\r\n      caption: ''\r\n    };\r\n    setContentBlocks([...contentBlocks, newBlock]);\r\n  };\r\n\r\n  const updateTextBlock = (blockId: string, content: string) => {\r\n    setContentBlocks(blocks =>\r\n      blocks.map(block =>\r\n        block.id === blockId ? { ...block, content } : block\r\n      )\r\n    );\r\n  };\r\n\r\n  const updateMediaBlock = (blockId: string, file: File, caption: string = '') => {\r\n    // Create preview URL\r\n    const previewUrl = URL.createObjectURL(file);\r\n\r\n    setContentBlocks(blocks =>\r\n      blocks.map(block =>\r\n        block.id === blockId\r\n          ? { ...block, file, caption, preview: previewUrl }\r\n          : block\r\n      )\r\n    );\r\n  };\r\n\r\n\r\n\r\n  const removeBlock = (blockId: string) => {\r\n    setContentBlocks(blocks => {\r\n      const filtered = blocks.filter(block => block.id !== blockId);\r\n      // Reorder remaining blocks\r\n      return filtered.map((block, index) => ({ ...block, order: index }));\r\n    });\r\n  };\r\n\r\n  const moveBlock = (blockId: string, direction: 'up' | 'down') => {\r\n    setContentBlocks(blocks => {\r\n      const index = blocks.findIndex(b => b.id === blockId);\r\n      if (\r\n        (direction === 'up' && index === 0) ||\r\n        (direction === 'down' && index === blocks.length - 1)\r\n      ) {\r\n        return blocks;\r\n      }\r\n\r\n      const newBlocks = [...blocks];\r\n      const newIndex = direction === 'up' ? index - 1 : index + 1;\r\n\r\n      // Swap elements\r\n      [newBlocks[index], newBlocks[newIndex]] = [newBlocks[newIndex], newBlocks[index]];\r\n\r\n      // Update order indices\r\n      return newBlocks.map((block, idx) => ({ ...block, order: idx }));\r\n    });\r\n  };\r\n\r\n  // Convert blocks to HTML for backend storage\r\n  const convertBlocksToHTML = () => {\r\n    return contentBlocks\r\n      .sort((a, b) => a.order - b.order) // Ensure correct order\r\n      .map(block => {\r\n        if (block.type === 'text' && block.content?.trim()) {\r\n          return `<div data-block-id=\"${block.id}\" data-block-type=\"text\" data-block-order=\"${block.order}\">${block.content}</div>`;\r\n        } else if (block.type === 'media') {\r\n          // Create placeholder for media that will be replaced during preview\r\n          return `<div data-block-id=\"${block.id}\" data-block-type=\"media\" data-block-order=\"${block.order}\" data-media-caption=\"${block.caption || ''}\" class=\"media-placeholder\">[MEDIA_PLACEHOLDER_${block.id}]</div>`;\r\n        }\r\n        return '';\r\n      })\r\n      .filter(html => html.trim())\r\n      .join('\\n\\n');\r\n  };\r\n\r\n  // Get media files from blocks for upload\r\n  const getBlockMediaFiles = () => {\r\n    return contentBlocks\r\n      .filter(block => block.type === 'media' && block.file)\r\n      .map(block => ({\r\n        file: block.file!,\r\n        caption: block.caption || '',\r\n        blockId: block.id,\r\n        order: block.order\r\n      }));\r\n  };\r\n\r\n  // Update HTML content to replace block IDs with actual media IDs after upload\r\n  const updateHtmlWithMediaIds = (html: string, mediaMapping: Record<string, string>) => {\r\n    let updatedHtml = html;\r\n\r\n    Object.entries(mediaMapping).forEach(([blockId, mediaId]) => {\r\n      // Update both placeholder text and div attributes\r\n      updatedHtml = updatedHtml.replace(\r\n        new RegExp(`\\\\[MEDIA_PLACEHOLDER_${blockId}\\\\]`, 'g'),\r\n        `[MEDIA_PLACEHOLDER_${mediaId}]`\r\n      );\r\n      updatedHtml = updatedHtml.replace(\r\n        new RegExp(`data-block-id=\"${blockId}\"`, 'g'),\r\n        `data-block-id=\"${mediaId}\"`\r\n      );\r\n    });\r\n\r\n    return updatedHtml;\r\n  };\r\n\r\n  // Parse existing HTML content back to blocks (for editing)\r\n  const parseHTMLToBlocks = (html: string, media: MediaItem[] = []) => {\r\n    const blocks: ContentBlock[] = [];\r\n\r\n    if (html) {\r\n      // Split by double newlines to get individual block parts\r\n      const parts = html.split('\\n\\n').filter(part => part.trim());\r\n\r\n      parts.forEach((part) => {\r\n        // Check if this is a media placeholder\r\n        if (part.includes('data-block-type=\"media\"') && part.includes('MEDIA_PLACEHOLDER_')) {\r\n          // Extract media block info from placeholder\r\n          const blockIdMatch = part.match(/data-block-id=\"([^\"]+)\"/);\r\n          const orderMatch = part.match(/data-block-order=\"([^\"]+)\"/);\r\n          const captionMatch = part.match(/data-media-caption=\"([^\"]*)\"/);\r\n          const placeholderMatch = part.match(/\\[MEDIA_PLACEHOLDER_([^\\]]+)\\]/);\r\n\r\n          if (blockIdMatch && placeholderMatch) {\r\n            const blockId = blockIdMatch[1];\r\n            const order = orderMatch ? parseInt(orderMatch[1]) : blocks.length;\r\n            const caption = captionMatch ? captionMatch[1] : '';\r\n\r\n            // Try to find matching media item\r\n            const mediaItem = media.find(m => m.id === blockId ||\r\n              part.includes(`MEDIA_PLACEHOLDER_${m.id}`));\r\n\r\n            blocks.push({\r\n              id: blockId,\r\n              type: 'media',\r\n              order: order,\r\n              caption: caption,\r\n              preview: mediaItem?.file_url\r\n            });\r\n          }\r\n        } else if (part.includes('data-block-type=\"text\"') || !part.includes('data-block-type=')) {\r\n          // This is a text block\r\n          const blockIdMatch = part.match(/data-block-id=\"([^\"]+)\"/);\r\n          const orderMatch = part.match(/data-block-order=\"([^\"]+)\"/);\r\n\r\n          const blockId = blockIdMatch ? blockIdMatch[1] : `text-${blocks.length}`;\r\n          const order = orderMatch ? parseInt(orderMatch[1]) : blocks.length;\r\n          const content = part.replace(/<div[^>]*>|<\\/div>/g, '').trim();\r\n\r\n          if (content) {\r\n            blocks.push({\r\n              id: blockId,\r\n              type: 'text',\r\n              order: order,\r\n              content: content\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      // Add any remaining media items that weren't found in placeholders\r\n      media.forEach((mediaItem) => {\r\n        const existingBlock = blocks.find(b =>\r\n          b.type === 'media' && (\r\n            b.id === mediaItem.id ||\r\n            b.preview === mediaItem.file_url\r\n          )\r\n        );\r\n\r\n        if (!existingBlock) {\r\n          blocks.push({\r\n            id: `existing-media-${mediaItem.id}`,\r\n            type: 'media',\r\n            order: blocks.length,\r\n            caption: mediaItem.caption || '',\r\n            preview: mediaItem.file_url\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      // No HTML content, just add media blocks if any\r\n      media.forEach((mediaItem, index) => {\r\n        blocks.push({\r\n          id: `media-${mediaItem.id}`,\r\n          type: 'media',\r\n          order: index,\r\n          caption: mediaItem.caption || '',\r\n          preview: mediaItem.file_url\r\n        });\r\n      });\r\n    }\r\n\r\n    // Sort blocks by order\r\n    blocks.sort((a, b) => a.order - b.order);\r\n\r\n    // If no blocks, add an empty text block\r\n    if (blocks.length === 0) {\r\n      blocks.push({\r\n        id: '1',\r\n        type: 'text',\r\n        order: 0,\r\n        content: ''\r\n      });\r\n    }\r\n\r\n    return blocks;\r\n  };\r\n\r\n  // Load material and poin details\r\n  useEffect(() => {\r\n    const loadMaterial = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await materialsAPI.get(materialId);\r\n\r\n        if (res.ok) {\r\n          // Load complete media data for each poin for preview\r\n          if (res.data.poin_details && res.data.poin_details.length > 0) {\r\n\r\n            const poinsWithMedia = await Promise.all(\r\n              res.data.poin_details.map(async (poin) => {\r\n                const poinWithMedia = await loadPoinWithMedia(poin.id);\r\n                if (poinWithMedia) {\r\n                  return poinWithMedia;\r\n                }\r\n                return poin;\r\n              })\r\n            );\r\n\r\n            res.data.poin_details = poinsWithMedia;\r\n          }\r\n          setMaterial(res.data);\r\n          setPoins(res.data.poin_details || []);\r\n        } else {\r\n          console.error('Failed to load material:', res);\r\n          let errorMsg = 'Gagal memuat materi';\r\n\r\n          if (res.status === 403) {\r\n            errorMsg = 'Akses ditolak. Materi mungkin masih dalam status draft atau Anda tidak memiliki izin admin. Coba gunakan endpoint admin.';\r\n          } else if (res.status === 401) {\r\n            errorMsg = 'Sesi login sudah berakhir. Silakan login ulang.';\r\n          } else if (res.status === 404) {\r\n            errorMsg = 'Materi tidak ditemukan. Periksa apakah ID materi benar.';\r\n          }\r\n\r\n          await Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: errorMsg,\r\n            footer: `Status: ${res.status} - ${res.error}`\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading material:', error);\r\n        await Swal.fire({ icon: 'error', title: 'Error', text: 'Terjadi kesalahan saat memuat materi' });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadMaterial();\r\n  }, [materialId]);\r\n\r\n  const resetForm = () => {\r\n    setTitle(\"\");\r\n    setDurationLabel(\"\");\r\n    setDurationMinutes(\"\");\r\n    setEditingPoin(null);\r\n    setExistingMedia([]);\r\n    setMediaToDelete([]);\r\n\r\n    // Reset to single empty text block\r\n    setContentBlocks([{\r\n      id: '1',\r\n      type: 'text',\r\n      order: 0,\r\n      content: ''\r\n    }]);\r\n\r\n    // Cleanup preview URLs to prevent memory leaks\r\n    contentBlocks.forEach(block => {\r\n      if (block.preview && block.preview.startsWith('blob:')) {\r\n        URL.revokeObjectURL(block.preview);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadPoinToForm = async (poin: PoinDetailRecord) => {\r\n    setTitle(poin.title);\r\n    setDurationLabel(poin.duration_label || \"\");\r\n    const durationValue = poin.duration_minutes !== null && poin.duration_minutes !== undefined\r\n      ? String(poin.duration_minutes)\r\n      : \"\";\r\n    setDurationMinutes(durationValue);\r\n    setEditingPoin(poin);\r\n\r\n    // Convert existing content to blocks\r\n    const media = getPoinMedia(poin);\r\n    const blocks = parseHTMLToBlocks(poin.content_html, media);\r\n    setContentBlocks(blocks);\r\n\r\n    // Load existing media using helper function\r\n    const poinMedia = getPoinMedia(poin);\r\n    if (poinMedia.length > 0) {\r\n      setExistingMedia(poinMedia);\r\n    } else {\r\n      // Load full poin data with media from backend\r\n      const fullPoin = await loadPoinWithMedia(poin.id);\r\n      if (fullPoin) {\r\n        const fullPoinMedia = getPoinMedia(fullPoin);\r\n        setExistingMedia(fullPoinMedia);\r\n      } else {\r\n        setExistingMedia([]);\r\n      }\r\n    }\r\n    setMediaToDelete([]);\r\n  };\r\n\r\n  // Existing media management functions\r\n  const updateExistingMediaCaption = (mediaId: string, caption: string) => {\r\n    setExistingMedia(prev => prev.map(media =>\r\n      media.id === mediaId\r\n        ? { ...media, caption, captionChanged: true }\r\n        : media\r\n    ));\r\n  };\r\n\r\n  const markMediaForDeletion = (mediaId: string) => {\r\n    setMediaToDelete(prev => [...prev, mediaId]);\r\n    setExistingMedia(prev => prev.filter(media => media.id !== mediaId));\r\n  };\r\n\r\n  const deleteMediaFromServer = async (mediaId: string) => {\r\n    try {\r\n      const { apiFetch } = await import('@/lib/api/client');\r\n      const res = await apiFetch(`/api/v1/admin/poins/media/${encodeURIComponent(mediaId)}`, {\r\n        method: \"DELETE\"\r\n      });\r\n\r\n      if (res.ok) {\r\n        return true;\r\n      } else {\r\n        console.error('Failed to delete media:', res);\r\n        return false;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting media:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const addNewMediaToPoin = async (poinId: string | number, file: File, caption: string) => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('media', file);\r\n      if (caption.trim()) {\r\n        formData.append('caption', caption.trim());\r\n      }\r\n\r\n      const { apiFetch } = await import('@/lib/api/client');\r\n      const res = await apiFetch(`/api/v1/admin/poins/${encodeURIComponent(String(poinId))}/media`, {\r\n        method: \"POST\",\r\n        body: formData,\r\n        asJson: false\r\n      });\r\n\r\n      if (res.ok) {\r\n        return res.data;\r\n      } else {\r\n        console.error('Failed to add new media:', res);\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding new media:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const updateMediaCaption = async (mediaId: string, caption: string) => {\r\n    try {\r\n      const { apiFetch } = await import('@/lib/api/client');\r\n      const res = await apiFetch(`/api/v1/admin/poins/media/${encodeURIComponent(mediaId)}`, {\r\n        method: \"PUT\",\r\n        body: { caption }\r\n      });\r\n\r\n      if (res.ok) {\r\n        return true;\r\n      } else {\r\n        console.error('Failed to update media caption:', res);\r\n        return false;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating media caption:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleAddPoin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    // Enhanced validation\r\n    const trimmedTitle = title.trim();\r\n\r\n    // Convert blocks to HTML and get media files\r\n    const contentHtml = convertBlocksToHTML();\r\n    const mediaFiles = getBlockMediaFiles();\r\n    const trimmedContentHtml = contentHtml.trim();\r\n\r\n    if (!trimmedTitle) {\r\n      await Swal.fire({ icon: 'warning', title: 'Peringatan', text: 'Judul poin harus diisi' });\r\n      return;\r\n    }\r\n\r\n    if (!trimmedContentHtml) {\r\n      await Swal.fire({ icon: 'warning', title: 'Peringatan', text: 'Konten poin harus diisi' });\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      // Use new endpoint that supports media upload\r\n      const payload = {\r\n        sub_materi_id: materialId,\r\n        title: trimmedTitle,\r\n        content_html: contentHtml,\r\n        duration_label: durationLabel.trim() || undefined,\r\n        order_index: poins.length + 1,\r\n        duration_minutes: durationMinutes ? Number(durationMinutes) : undefined,\r\n      };\r\n\r\n      // Use createWithMedia for files, fallback to regular create if no files\r\n      let res;\r\n      if (mediaFiles.length > 0) {\r\n        // Direct API call to createWithMedia endpoint since method might not be available yet\r\n        try {\r\n          const formData = new FormData();\r\n\r\n          // Append required poin data - sub_materi_id is critical for backend\r\n          formData.append('sub_materi_id', materialId);\r\n          formData.append('title', payload.title);\r\n          formData.append('content_html', payload.content_html);\r\n\r\n          // Append optional data\r\n          if (payload.duration_label) formData.append('duration_label', payload.duration_label);\r\n          if (payload.duration_minutes) formData.append('duration_minutes', String(payload.duration_minutes));\r\n          if (payload.order_index) formData.append('order_index', String(payload.order_index));\r\n\r\n          // Append media files\r\n          mediaFiles.forEach(mediaFile => {\r\n            formData.append('media', mediaFile.file);\r\n          });\r\n\r\n          // Append captions if provided\r\n          const captions = mediaFiles.map(mf => mf.caption);\r\n          if (captions.length > 0) {\r\n            formData.append('captions', JSON.stringify(captions));\r\n          }\r\n\r\n          // Import apiFetch directly for this call\r\n          const { apiFetch } = await import('@/lib/api/client');\r\n          res = await apiFetch<PoinDetailRecord>(\r\n            `/api/v1/admin/sub-materis/${encodeURIComponent(materialId)}/poins-with-media`,\r\n            {\r\n              method: \"POST\",\r\n              body: formData,\r\n              asJson: false, // CRITICAL: Don't set Content-Type for FormData!\r\n            }\r\n          );\r\n        } catch (error) {\r\n          console.error('Direct API call failed:', error);\r\n          throw error;\r\n        }\r\n      } else {\r\n        res = await poinsAPI.create(String(materialId), payload);\r\n      }\r\n\r\n      if (res.ok) {\r\n        // If media was uploaded, we need to update the HTML with correct media IDs\r\n        if (mediaFiles.length > 0 && res.data?.poin_media) {\r\n          // Create mapping of block IDs to media IDs based on upload order\r\n          const mediaMapping: Record<string, string> = {};\r\n          mediaFiles.forEach((mediaFile, index) => {\r\n            if (res.data.poin_media?.[index]) {\r\n              mediaMapping[mediaFile.blockId] = res.data.poin_media[index].id;\r\n            }\r\n          });\r\n\r\n          // Update the poin's content_html with correct media IDs\r\n          if (Object.keys(mediaMapping).length > 0) {\r\n            const updatedHtml = updateHtmlWithMediaIds(res.data.content_html, mediaMapping);\r\n\r\n            // Update the poin with correct HTML\r\n            try {\r\n              const updateRes = await poinsAPI.update(res.data.id, {\r\n                content_html: updatedHtml\r\n              });\r\n\r\n              if (!updateRes.ok) {\r\n                console.warn('Failed to update poin HTML with media IDs:', updateRes);\r\n              }\r\n            } catch (updateError) {\r\n              console.warn('Error updating poin HTML:', updateError);\r\n            }\r\n          }\r\n        }\r\n\r\n        // Reload material to get updated poins with full media data\r\n        const materialRes = await materialsAPI.get(materialId);\r\n        if (materialRes.ok) {\r\n          // Load complete media data for each poin for preview\r\n          if (materialRes.data.poin_details && materialRes.data.poin_details.length > 0) {\r\n            const poinsWithMedia = await Promise.all(\r\n              materialRes.data.poin_details.map(async (poin) => {\r\n                const poinWithMedia = await loadPoinWithMedia(poin.id);\r\n                if (poinWithMedia) {\r\n                  return poinWithMedia;\r\n                }\r\n                return poin;\r\n              })\r\n            );\r\n\r\n            materialRes.data.poin_details = poinsWithMedia;\r\n          }\r\n          setMaterial(materialRes.data);\r\n          setPoins(materialRes.data.poin_details || []);\r\n        }\r\n        resetForm();\r\n        setShowAddPoin(false);\r\n\r\n        const mediaCount = mediaFiles.length;\r\n        const successMessage = mediaCount > 0\r\n          ? `Poin berhasil ditambahkan dengan ${mediaCount} file media`\r\n          : 'Poin berhasil ditambahkan';\r\n\r\n        await Swal.fire({\r\n          icon: 'success',\r\n          title: 'Berhasil',\r\n          text: successMessage,\r\n          timer: 2000,\r\n          showConfirmButton: false\r\n        });\r\n      } else {\r\n        // Enhanced error handling based on backend documentation\r\n        let errorTitle = 'Gagal Menambah Poin';\r\n        let errorMessage = 'Terjadi kesalahan saat menambah poin';\r\n\r\n        if (res.status === 401) {\r\n          errorTitle = 'Akses Ditolak';\r\n          errorMessage = 'Sesi login telah berakhir. Silakan login kembali.';\r\n        } else if (res.status === 413) {\r\n          errorTitle = 'File Terlalu Besar';\r\n          errorMessage = 'Ukuran file melebihi batas maksimal 50MB per file.';\r\n        } else if (res.status === 400) {\r\n          errorTitle = 'Data Tidak Valid';\r\n          errorMessage = res.error || 'Data yang dikirim tidak valid. Periksa kembali form Anda.';\r\n        } else if (res.status === 500) {\r\n          errorTitle = 'Server Error';\r\n          errorMessage = 'Terjadi kesalahan pada server. Silakan coba lagi nanti.';\r\n        }\r\n\r\n        await Swal.fire({\r\n          icon: 'error',\r\n          title: errorTitle,\r\n          text: errorMessage,\r\n          footer: mediaFiles.length > 0 ? 'Tip: Coba kurangi jumlah atau ukuran file yang diunggah' : undefined\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding poin:', error);\r\n\r\n      // Enhanced catch error handling\r\n      let errorMessage = 'Terjadi kesalahan saat menambah poin';\r\n\r\n      if (error instanceof Error) {\r\n        if (error.message.includes('network') || error.message.includes('fetch')) {\r\n          errorMessage = 'Koneksi internet bermasalah. Periksa koneksi Anda dan coba lagi.';\r\n        } else if (error.message.includes('timeout')) {\r\n          errorMessage = 'Upload memakan waktu terlalu lama. Coba kurangi ukuran file atau jumlah file.';\r\n        }\r\n      }\r\n\r\n      await Swal.fire({\r\n        icon: 'error',\r\n        title: 'Error',\r\n        text: errorMessage,\r\n        footer: mediaFiles.length > 0 ? `Mencoba upload ${mediaFiles.length} file` : undefined\r\n      });\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleEditPoin = async (poin: PoinDetailRecord) => {\r\n    await loadPoinToForm(poin);\r\n    setShowEditPoin(true);\r\n    setShowAddPoin(false); // Hide add form if open\r\n  };\r\n\r\n  const handleUpdatePoin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!editingPoin) return;\r\n\r\n    // Convert blocks to HTML and get media files for update\r\n    const contentHtml = convertBlocksToHTML();\r\n    const mediaFiles = getBlockMediaFiles();\r\n\r\n    if (!title.trim() || !contentHtml.trim()) {\r\n      await Swal.fire({ icon: 'error', title: 'Error', text: 'Judul dan konten harus diisi' });\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      // 1. Update poin text fields\r\n      const payload = {\r\n        title: title.trim(),\r\n        content_html: contentHtml.trim(),\r\n        duration_label: durationLabel.trim() || undefined,\r\n        duration_minutes: durationMinutes ? Number(durationMinutes) : undefined,\r\n      };\r\n\r\n      const res = await poinsAPI.update(editingPoin.id, payload);\r\n      if (!res.ok) {\r\n        await Swal.fire({ icon: 'error', title: 'Error', text: 'Gagal memperbarui poin' });\r\n        return;\r\n      }\r\n\r\n      // 2. Delete marked media\r\n      for (const mediaId of mediaToDelete) {\r\n        await deleteMediaFromServer(mediaId);\r\n      }\r\n\r\n      // 3. Update existing media captions that were changed\r\n      for (const media of existingMedia) {\r\n        if (media.captionChanged) {\r\n          await updateMediaCaption(media.id, media.caption || '');\r\n        }\r\n      }\r\n\r\n      // 4. Add new media files from blocks\r\n      const newMediaIds: string[] = [];\r\n      for (const mediaFile of mediaFiles) {\r\n        const newMediaResponse = await addNewMediaToPoin(editingPoin.id, mediaFile.file, mediaFile.caption);\r\n        if (newMediaResponse && typeof newMediaResponse === 'object' && 'id' in newMediaResponse) {\r\n          newMediaIds.push((newMediaResponse as { id: string }).id);\r\n        }\r\n      }\r\n\r\n      // 5. Update HTML with new media IDs if any new media was added\r\n      if (mediaFiles.length > 0 && newMediaIds.length > 0) {\r\n        const mediaMapping: Record<string, string> = {};\r\n        mediaFiles.forEach((mediaFile, index) => {\r\n          if (newMediaIds[index]) {\r\n            mediaMapping[mediaFile.blockId] = newMediaIds[index];\r\n          }\r\n        });\r\n\r\n        if (Object.keys(mediaMapping).length > 0) {\r\n          const currentPoin = await loadPoinWithMedia(editingPoin.id);\r\n          if (currentPoin) {\r\n            const updatedHtml = updateHtmlWithMediaIds(currentPoin.content_html, mediaMapping);\r\n\r\n            await poinsAPI.update(editingPoin.id, {\r\n              content_html: updatedHtml\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      // Reload material to get updated poins with full media data\r\n      const materialRes = await materialsAPI.get(materialId);\r\n      if (materialRes.ok) {\r\n        // Load complete media data for each poin for preview\r\n        if (materialRes.data.poin_details && materialRes.data.poin_details.length > 0) {\r\n          const poinsWithMedia = await Promise.all(\r\n            materialRes.data.poin_details.map(async (poin) => {\r\n              const poinWithMedia = await loadPoinWithMedia(poin.id);\r\n              if (poinWithMedia) {\r\n                return poinWithMedia;\r\n              }\r\n              return poin;\r\n            })\r\n          );\r\n\r\n          materialRes.data.poin_details = poinsWithMedia;\r\n        }\r\n        setMaterial(materialRes.data);\r\n        setPoins(materialRes.data.poin_details || []);\r\n      }\r\n\r\n      resetForm();\r\n      setShowEditPoin(false);\r\n\r\n      const mediaChanges = mediaToDelete.length + mediaFiles.length + existingMedia.filter(m => m.captionChanged).length;\r\n      const successMessage = mediaChanges > 0\r\n        ? 'Poin berhasil diperbarui dengan perubahan media'\r\n        : 'Poin berhasil diperbarui';\r\n\r\n      await Swal.fire({\r\n        icon: 'success',\r\n        title: 'Berhasil',\r\n        text: successMessage,\r\n        timer: 1500,\r\n        showConfirmButton: false\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error updating poin:', error);\r\n      await Swal.fire({ icon: 'error', title: 'Error', text: 'Terjadi kesalahan saat memperbarui poin' });\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    resetForm();\r\n    setShowEditPoin(false);\r\n  };\r\n\r\n\r\n\r\n  const handleDeletePoin = async (poin: PoinDetailRecord) => {\r\n    const result = await Swal.fire({\r\n      title: 'Hapus Poin?',\r\n      text: `Poin \"${poin.title}\" akan dihapus.`,\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Hapus',\r\n      cancelButtonText: 'Batal',\r\n      reverseButtons: true,\r\n    });\r\n\r\n    if (result.isConfirmed) {\r\n      try {\r\n        const res = await poinsAPI.remove(poin.id);\r\n        if (res.ok) {\r\n          // Reload material with full media data\r\n          const materialRes = await materialsAPI.get(materialId);\r\n          if (materialRes.ok) {\r\n            // Load complete media data for each poin for preview\r\n            if (materialRes.data.poin_details && materialRes.data.poin_details.length > 0) {\r\n              const poinsWithMedia = await Promise.all(\r\n                materialRes.data.poin_details.map(async (poin) => {\r\n                  const poinWithMedia = await loadPoinWithMedia(poin.id);\r\n                  if (poinWithMedia) {\r\n                    return poinWithMedia;\r\n                  }\r\n                  return poin;\r\n                })\r\n              );\r\n\r\n              materialRes.data.poin_details = poinsWithMedia;\r\n            }\r\n            setMaterial(materialRes.data);\r\n            setPoins(materialRes.data.poin_details || []);\r\n          }\r\n          await Swal.fire({ icon: 'success', title: 'Berhasil', text: 'Poin berhasil dihapus', timer: 1500, showConfirmButton: false });\r\n        } else {\r\n          await Swal.fire({ icon: 'error', title: 'Error', text: 'Gagal menghapus poin' });\r\n        }\r\n      } catch (error) {\r\n        console.error('Error deleting poin:', error);\r\n        await Swal.fire({ icon: 'error', title: 'Error', text: 'Terjadi kesalahan saat menghapus poin' });\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-6 bg-gray-50 min-h-screen\">\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"text-gray-500\">Memuat materi...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!material) {\r\n    return (\r\n      <div className=\"p-6 bg-gray-50 min-h-screen\">\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"text-red-500\">Materi tidak ditemukan</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 bg-gray-50 min-h-screen\">\r\n      {/* Header */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"flex items-center gap-4 mb-4\">\r\n          <button\r\n            onClick={() => router.back()}\r\n            className=\"flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg transition-colors\"\r\n          >\r\n            <ArrowLeft className=\"w-4 h-4\" />\r\n            Kembali\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">{material.title}</h1>\r\n          {material.content && (\r\n            <div className=\"text-gray-600 mb-4 max-h-24 overflow-hidden\">\r\n              <div dangerouslySetInnerHTML={{ __html: material.content.slice(0, 200) + '...' }} />\r\n            </div>\r\n          )}\r\n          <div className=\"flex flex-wrap gap-4 text-sm text-gray-500\">\r\n            <span>{poins.length} Poin Materi</span>\r\n            {material.published ? (\r\n              <span className=\"text-green-600\">Terbit</span>\r\n            ) : (\r\n              <span className=\"text-amber-600\">Draf</span>\r\n            )}\r\n          </div>\r\n\r\n          {/* Draft warning/info */}\r\n          {!material.published && (\r\n            <div className=\"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <p className=\"text-sm text-amber-800\">\r\n                  <strong>Mode Draft:</strong> Materi ini belum dipublikasi, namun Anda tetap bisa menambahkan dan mengelola poin-poin pembelajaran.\r\n                  Poin akan tersimpan dan siap digunakan saat materi dipublikasikan.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabs Navigation */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"border-b border-gray-200\">\r\n          <nav className=\"flex space-x-8\">\r\n            <button\r\n              onClick={() => setActiveTab('manage')}\r\n              className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${activeTab === 'manage'\r\n                ? 'border-blue-500 text-blue-600'\r\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n            >\r\n              Kelola Poin\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('preview')}\r\n              className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${activeTab === 'preview'\r\n                ? 'border-blue-500 text-blue-600'\r\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n            >\r\n              Preview Materi\r\n              {poins.length > 0 && (\r\n                <span className=\"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-800 rounded-full\">\r\n                  {poins.length} poin\r\n                </span>\r\n              )}\r\n            </button>\r\n          </nav>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      {activeTab === 'manage' && (\r\n        <>\r\n          {/* Add Poin Button */}\r\n          {!showEditPoin && (\r\n            <div className=\"mb-6\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowAddPoin(!showAddPoin);\r\n                  if (showAddPoin) {\r\n                    resetForm(); // Reset form when closing\r\n                  }\r\n                }}\r\n                className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow transition-colors\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                {showAddPoin ? 'Tutup Form' : 'Tambah Poin'}\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Add/Edit Poin Form */}\r\n          {(showAddPoin || showEditPoin) && (\r\n            <form onSubmit={editingPoin ? handleUpdatePoin : handleAddPoin} className=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200 mb-6\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n                {editingPoin ? 'Edit Poin' : 'Tambah Poin Baru'}\r\n              </h2>\r\n\r\n              <div className=\"space-y-4 text-black\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Judul Poin *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={title}\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"Masukkan judul poin...\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Label Durasi</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={durationLabel}\r\n                      onChange={(e) => setDurationLabel(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      placeholder=\"contoh: Bacaan 5 menit\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Durasi (menit)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={durationMinutes}\r\n                      onChange={(e) => setDurationMinutes(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      placeholder=\"Estimasi menit\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Upload Media <span className=\"text-xs text-gray-500\">(Max 10 files, 50MB per file)</span>\r\n                    </label>\r\n                    <input\r\n                      type=\"file\"\r\n                      multiple\r\n                      accept=\"image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,video/ogg,video/avi,video/mov,audio/*,.pdf\"\r\n                      onChange={handleFileSelection}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    />\r\n                    <div className=\"mt-1 text-xs text-gray-500\">\r\n                      Supported: Images (JPEG, PNG, GIF, WebP), Videos (MP4, WebM, OGG, AVI, MOV), Audio (all formats), PDF\r\n                    </div>\r\n                  </div> */}\r\n                </div>\r\n\r\n\r\n\r\n                {/* Existing Media (for Edit mode) */}\r\n                {editingPoin && existingMedia.length > 0 && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-3\">Media yang Sudah Ada</label>\r\n\r\n                    {/* Debug Information */}\r\n                    <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                      <details className=\"text-xs text-blue-800\">\r\n                        <summary className=\"cursor-pointer font-medium\">ðŸ” Debug Info (klik untuk expand)</summary>\r\n                        <div className=\"mt-2 space-y-2\">\r\n                          <p><strong>Media Count:</strong> {existingMedia.length}</p>\r\n                          {existingMedia.map((media, idx) => (\r\n                            <div key={media.id} className=\"p-2 bg-white rounded border\">\r\n                              <p><strong>Media #{idx + 1}:</strong></p>\r\n                              <p><strong>ID:</strong> {media.id}</p>\r\n                              <p><strong>Filename:</strong> {media.original_filename}</p>\r\n                              <p><strong>MIME:</strong> {media.mime_type}</p>\r\n                              <p><strong>Size:</strong> {media.file_size ? `${(media.file_size / 1024 / 1024).toFixed(2)} MB` : 'Unknown'}</p>\r\n                              <p><strong>URL:</strong>\r\n                                <a href={media.file_url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:underline break-all\">\r\n                                  {media.file_url}\r\n                                </a>\r\n                                {media.file_url && (\r\n                                  <span className=\"ml-2\">\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        const testImg = document.createElement('img');\r\n                                        testImg.onload = () => { /* URL test success */ };\r\n                                        testImg.onerror = () => { /* URL test failed */ };\r\n                                        testImg.src = media.file_url;\r\n                                      }}\r\n                                      className=\"text-xs bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700\"\r\n                                    >\r\n                                      Test URL\r\n                                    </button>\r\n                                  </span>\r\n                                )}\r\n                              </p>\r\n                              <p><strong>Caption:</strong> {media.caption || 'No caption'}</p>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </details>\r\n                    </div>\r\n                    <div className=\"space-y-4\">\r\n                      {existingMedia.map((media) => (\r\n                        <div key={media.id} className=\"p-4 bg-amber-50 rounded-lg border border-amber-200\">\r\n                          <div className=\"flex items-start gap-4\">\r\n                            {/* Preview Media */}\r\n                            <div className=\"flex-shrink-0\">\r\n                              {media.mime_type?.startsWith('image/') && !imageErrors.has(media.id) ? (\r\n                                <Image\r\n                                  src={media.file_url}\r\n                                  alt={media.caption || media.original_filename}\r\n                                  width={80}\r\n                                  height={80}\r\n                                  className=\"w-20 h-20 object-cover rounded-lg border border-gray-300\"\r\n                                  unoptimized\r\n                                  onError={(e) => {\r\n                                    console.error('Image load error:', {\r\n                                      media_id: media.id,\r\n                                      file_url: media.file_url,\r\n                                      mime_type: media.mime_type,\r\n                                      original_filename: media.original_filename,\r\n                                      error: e\r\n                                    });\r\n                                    setImageErrors(prev => new Set(prev).add(media.id));\r\n                                  }}\r\n                                  onLoad={() => {\r\n                                    setImageErrors(prev => {\r\n                                      const newSet = new Set(prev);\r\n                                      newSet.delete(media.id);\r\n                                      return newSet;\r\n                                    });\r\n                                  }}\r\n                                />\r\n                              ) : media.mime_type?.startsWith('image/') && imageErrors.has(media.id) ? (\r\n                                <div className=\"w-20 h-20 bg-red-100 border border-red-200 rounded-lg flex flex-col items-center justify-center p-1\">\r\n                                  <ImageIcon className=\"w-4 h-4 text-red-600 mb-1\" />\r\n                                  <a\r\n                                    href={media.file_url}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"text-xs text-red-600 hover:text-red-800 text-center leading-tight\"\r\n                                  >\r\n                                    URL Error\r\n                                  </a>\r\n                                </div>\r\n                              ) : (\r\n                                <div className=\"w-20 h-20 bg-gray-200 rounded-lg border border-gray-300 flex items-center justify-center\">\r\n                                  {media.mime_type?.startsWith('video/') ? (\r\n                                    <Video className=\"w-6 h-6 text-purple-600\" />\r\n                                  ) : media.mime_type?.startsWith('audio/') ? (\r\n                                    <FileText className=\"w-6 h-6 text-blue-600\" />\r\n                                  ) : media.mime_type === 'application/pdf' ? (\r\n                                    <FileText className=\"w-6 h-6 text-red-600\" />\r\n                                  ) : (\r\n                                    <FileText className=\"w-6 h-6 text-gray-600\" />\r\n                                  )}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n\r\n                            {/* Media Info & Caption */}\r\n                            <div className=\"flex-1 space-y-2\">\r\n                              <div>\r\n                                <p className=\"text-sm font-medium text-gray-900\">{media.original_filename}</p>\r\n                                <p className=\"text-xs text-gray-500\">\r\n                                  {media.mime_type?.startsWith('image/') ? 'Gambar' :\r\n                                    media.mime_type?.startsWith('video/') ? 'Video' :\r\n                                      media.mime_type?.startsWith('audio/') ? 'Audio' :\r\n                                        media.mime_type === 'application/pdf' ? 'PDF' : 'File'} â€¢\r\n                                  {media.file_size ? ` ${(media.file_size / 1024 / 1024).toFixed(2)} MB` : ' Unknown size'}\r\n                                </p>\r\n                              </div>\r\n\r\n                              {/* Caption Input */}\r\n                              <div>\r\n                                <input\r\n                                  type=\"text\"\r\n                                  value={media.caption || ''}\r\n                                  onChange={(e) => updateExistingMediaCaption(media.id, e.target.value)}\r\n                                  placeholder=\"Edit caption untuk media ini...\"\r\n                                  className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                                />\r\n                              </div>\r\n                            </div>\r\n\r\n                            {/* Delete Button */}\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => markMediaForDeletion(media.id)}\r\n                              className=\"flex-shrink-0 p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors\"\r\n                              title=\"Hapus media\"\r\n                            >\r\n                              <Trash2 className=\"w-4 h-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n\r\n                    {/* Existing Media Tips */}\r\n                    <div className=\"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg\">\r\n                      <p className=\"text-xs text-amber-700\">\r\n                        ðŸ“ <strong>Media yang Ada:</strong> Edit caption atau hapus media yang tidak diperlukan.\r\n                        Perubahan akan disimpan saat Anda menekan &quot;Perbarui Poin&quot;.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Block Editor */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Konten Poin *</label>\r\n\r\n                  {/* Add Block Buttons */}\r\n                  <div className=\"flex gap-2 mb-4\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={addTextBlock}\r\n                      className=\"flex items-center gap-2 px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded-md text-sm font-medium transition-colors\"\r\n                    >\r\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4\" />\r\n                      </svg>\r\n                      Add Text\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={addMediaBlock}\r\n                      className=\"flex items-center gap-2 px-3 py-1.5 bg-green-50 hover:bg-green-100 text-green-700 border border-green-200 rounded-md text-sm font-medium transition-colors\"\r\n                    >\r\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                      </svg>\r\n                      Add Media\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Content Blocks */}\r\n                  <div className=\"space-y-3 border border-gray-200 rounded-lg p-4 min-h-[200px]\">\r\n                    {contentBlocks.map((block, index) => (\r\n                      <div key={block.id} className=\"group relative\">\r\n                        {block.type === 'text' ? (\r\n                          <div className=\"relative\">\r\n                            <textarea\r\n                              value={block.content || ''}\r\n                              onChange={(e) => updateTextBlock(block.id, e.target.value)}\r\n                              placeholder=\"Type your text content here...\"\r\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-md resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                              rows={3}\r\n                            />\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"relative\">\r\n                            {/* Media Block */}\r\n                            <div className=\"border-2 border-dashed border-gray-300 rounded-md p-4\">\r\n                              {block.file || block.preview ? (\r\n                                <div className=\"space-y-3\">\r\n                                  {/* Preview */}\r\n                                  {block.preview && (\r\n                                    <div className=\"relative\">\r\n                                      <Image\r\n                                        src={block.preview}\r\n                                        alt=\"Preview\"\r\n                                        width={200}\r\n                                        height={200}\r\n                                        className=\"max-w-full h-auto max-h-48 object-contain rounded\"\r\n                                        unoptimized\r\n                                      />\r\n                                    </div>\r\n                                  )}\r\n\r\n                                  {/* Caption Input */}\r\n                                  <input\r\n                                    type=\"text\"\r\n                                    value={block.caption || ''}\r\n                                    onChange={(e) => {\r\n                                      setContentBlocks(blocks =>\r\n                                        blocks.map(b =>\r\n                                          b.id === block.id\r\n                                            ? { ...b, caption: e.target.value }\r\n                                            : b\r\n                                        )\r\n                                      );\r\n                                    }}\r\n                                    placeholder=\"Enter caption (optional)\"\r\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                                  />\r\n                                </div>\r\n                              ) : (\r\n                                <div className=\"text-center py-6\">\r\n                                  <input\r\n                                    type=\"file\"\r\n                                    accept=\"image/*,video/*,audio/*,.pdf,.doc,.docx\"\r\n                                    onChange={(e) => {\r\n                                      const file = e.target.files?.[0];\r\n                                      if (file) {\r\n                                        updateMediaBlock(block.id, file);\r\n                                      }\r\n                                    }}\r\n                                    className=\"hidden\"\r\n                                    id={`media-${block.id}`}\r\n                                  />\r\n                                  <label\r\n                                    htmlFor={`media-${block.id}`}\r\n                                    className=\"cursor-pointer flex flex-col items-center gap-2 text-gray-500 hover:text-gray-700\"\r\n                                  >\r\n                                    <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\r\n                                    </svg>\r\n                                    <span className=\"text-sm font-medium\">Click to upload media</span>\r\n                                    <span className=\"text-xs\">Images, videos, documents</span>\r\n                                  </label>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Block Controls */}\r\n                        <div className=\"absolute -right-2 -top-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                          <div className=\"flex flex-col gap-1 bg-white border border-gray-200 rounded-md shadow-sm\">\r\n                            {index > 0 && (\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => moveBlock(block.id, 'up')}\r\n                                className=\"p-1.5 hover:bg-gray-50 text-gray-600 hover:text-gray-800\"\r\n                                title=\"Move up\"\r\n                              >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 15l7-7 7 7\" />\r\n                                </svg>\r\n                              </button>\r\n                            )}\r\n                            {index < contentBlocks.length - 1 && (\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => moveBlock(block.id, 'down')}\r\n                                className=\"p-1.5 hover:bg-gray-50 text-gray-600 hover:text-gray-800\"\r\n                                title=\"Move down\"\r\n                              >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                                </svg>\r\n                              </button>\r\n                            )}\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => removeBlock(block.id)}\r\n                              className=\"p-1.5 hover:bg-red-50 text-red-600 hover:text-red-800\"\r\n                              title=\"Delete block\"\r\n                            >\r\n                              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                              </svg>\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n\r\n                    {contentBlocks.length === 0 && (\r\n                      <div className=\"text-center py-8 text-gray-500\">\r\n                        <p>No content blocks yet.</p>\r\n                        <p className=\"text-sm\">Click &ldquo;Add Text&rdquo; or &ldquo;Add Media&rdquo; to start creating content.</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"mt-2 text-xs text-gray-500\">\r\n                    Use the block editor to create content with mixed text and media. Order will be preserved in the final display.\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-3 mt-6\">\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={submitting}\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow transition-colors disabled:opacity-60\"\r\n                >\r\n                  {submitting ? (\r\n                    getBlockMediaFiles().length > 0 ?\r\n                      `Mengupload ${getBlockMediaFiles().length} file...` :\r\n                      'Menyimpan...'\r\n                  ) : (\r\n                    editingPoin ? 'Perbarui Poin' : 'Simpan Poin'\r\n                  )}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={editingPoin ? handleCancelEdit : () => {\r\n                    resetForm();\r\n                    setShowAddPoin(false);\r\n                  }}\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg shadow transition-colors\"\r\n                >\r\n                  Batal\r\n                </button>\r\n              </div>\r\n            </form>\r\n          )}\r\n\r\n          {/* Poins List */}\r\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200\">\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">Daftar Poin ({poins.length})</h2>\r\n            </div>\r\n\r\n            {poins.length === 0 ? (\r\n              <div className=\"p-8 text-center text-gray-500\">\r\n                <FileText className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\r\n                <p>Belum ada poin. Klik &quot;Tambah Poin&quot; untuk mulai membuat konten materi.</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"divide-y divide-gray-200\">\r\n                {poins\r\n                  .sort((a, b) => (a.order_index || 0) - (b.order_index || 0))\r\n                  .map((poin, index) => (\r\n                    <div key={poin.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\r\n                      <div className=\"flex items-start justify-between mb-3\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center gap-3 mb-3\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                              {index + 1}. {poin.title}\r\n                            </h3>\r\n                            {poin.duration_label && (\r\n                              <span className=\"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full font-medium\">\r\n                                {poin.duration_label}\r\n                              </span>\r\n                            )}\r\n                            {poin.duration_minutes && (\r\n                              <span className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full\">\r\n                                {poin.duration_minutes} menit\r\n                              </span>\r\n                            )}\r\n                            {getPoinMedia(poin).length > 0 && (\r\n                              <span className=\"text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full font-medium\">\r\n                                {getPoinMedia(poin).length} Media\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n\r\n                          {/* Media Preview Thumbnails */}\r\n                          {getPoinMedia(poin).length > 0 && (\r\n                            <div className=\"flex gap-2 mb-3\">\r\n                              {getPoinMedia(poin).slice(0, 4).map((media) => (\r\n                                <div key={media.id} className=\"flex-shrink-0\">\r\n                                  {media.mime_type?.startsWith('image/') && !imageErrors.has(media.id) ? (\r\n                                    <Image\r\n                                      src={media.file_url}\r\n                                      alt={media.caption || media.original_filename}\r\n                                      width={60}\r\n                                      height={60}\r\n                                      className=\"w-15 h-15 object-cover rounded-lg border border-gray-200\"\r\n                                      unoptimized\r\n                                      onError={() => {\r\n                                        setImageErrors(prev => new Set(prev).add(media.id));\r\n                                      }}\r\n                                      onLoad={() => {\r\n                                        setImageErrors(prev => {\r\n                                          const newSet = new Set(prev);\r\n                                          newSet.delete(media.id);\r\n                                          return newSet;\r\n                                        });\r\n                                      }}\r\n                                    />\r\n                                  ) : (\r\n                                    <div className=\"w-15 h-15 bg-gray-200 rounded-lg border border-gray-200 flex items-center justify-center\">\r\n                                      {media.mime_type?.startsWith('video/') ? (\r\n                                        <Video className=\"w-6 h-6 text-purple-600\" />\r\n                                      ) : media.mime_type?.startsWith('audio/') ? (\r\n                                        <FileText className=\"w-6 h-6 text-blue-600\" />\r\n                                      ) : media.mime_type === 'application/pdf' ? (\r\n                                        <FileText className=\"w-6 h-6 text-red-600\" />\r\n                                      ) : (\r\n                                        <FileText className=\"w-6 h-6 text-gray-600\" />\r\n                                      )}\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                              ))}\r\n                              {getPoinMedia(poin).length > 4 && (\r\n                                <div className=\"w-15 h-15 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center\">\r\n                                  <span className=\"text-xs text-gray-600 font-medium\">\r\n                                    +{getPoinMedia(poin).length - 4}\r\n                                  </span>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"prose prose-sm max-w-none text-gray-600\">\r\n                            <div dangerouslySetInnerHTML={{ __html: poin.content_html.slice(0, 200) + (poin.content_html.length > 200 ? '...' : '') }} />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-2 ml-4\">\r\n                          <button\r\n                            onClick={() => handleEditPoin(poin)}\r\n                            className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\r\n                            title=\"Edit\"\r\n                          >\r\n                            <Edit className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDeletePoin(poin)}\r\n                            className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                            title=\"Hapus\"\r\n                          >\r\n                            <Trash2 className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {/* Preview Tab Content */}\r\n      {activeTab === 'preview' && material && (\r\n        <MaterialPreview\r\n          poins={poins}\r\n          materialTitle={material.title}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2872, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus%20TUF%20Gaming/Documents/KULIAH/Pengabdian%20Website%20Posyandu/bukadita_backoffice/src/app/admin/modul/%5Bid%5D/materi/%5BmaterialId%5D/poin/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport MaterialPoinManager from \"@/components/admin/MaterialPoinManager\";\r\n\r\nexport default function NestedMaterialPoinPage() {\r\n  const params = useParams();\r\n  const moduleId = String(params?.id || \"\");\r\n  const materialId = String(params?.materialId || \"\");\r\n\r\n  if (!moduleId || !materialId) {\r\n    return (\r\n      <div className=\"p-6 bg-gray-50 min-h-screen\">\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"text-red-500\">\r\n            <h2 className=\"text-lg font-semibold mb-2\">Parameter Tidak Valid</h2>\r\n            <p>Module ID: {moduleId || 'Missing'}</p>\r\n            <p>Material ID: {materialId || 'Missing'}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <MaterialPoinManager materialId={materialId} />\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,SAAS,IAAA,iOAAS;IACxB,MAAM,WAAW,OAAO,CAAA,mBAAA,6BAAA,OAAQ,EAAE,KAAI;IACtC,MAAM,aAAa,OAAO,CAAA,mBAAA,6BAAA,OAAQ,UAAU,KAAI;IAEhD,IAAI,CAAC,YAAY,CAAC,YAAY;QAC5B,qBACE,4QAAC;YAAI,WAAU;sBACb,cAAA,4QAAC;gBAAI,WAAU;0BACb,cAAA,4QAAC;oBAAI,WAAU;;sCACb,4QAAC;4BAAG,WAAU;sCAA6B;;;;;;sCAC3C,4QAAC;;gCAAE;gCAAY,YAAY;;;;;;;sCAC3B,4QAAC;;gCAAE;gCAAc,cAAc;;;;;;;;;;;;;;;;;;;;;;;IAKzC;IAEA,qBACE,4QAAC;kBACC,cAAA,4QAAC,+OAAmB;YAAC,YAAY;;;;;;;;;;;AAGvC;GAxBwB;;QACP,iOAAS;;;KADF","debugId":null}}]
}