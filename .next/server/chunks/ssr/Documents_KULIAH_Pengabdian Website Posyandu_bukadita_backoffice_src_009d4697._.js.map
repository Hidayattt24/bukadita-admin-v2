{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus%20TUF%20Gaming/Documents/KULIAH/Pengabdian%20Website%20Posyandu/bukadita_backoffice/src/components/admin/shared/DataTable.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Search, Plus, Edit, Trash2, Eye } from \"lucide-react\";\r\n\r\ninterface Column<T> {\r\n  key: string;\r\n  label: string;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  render?: (value: any, row: T) => React.ReactNode;\r\n}\r\n\r\ninterface DataTableProps<T> {\r\n  title: string;\r\n  data: T[];\r\n  columns: Column<T>[];\r\n  onAdd?: () => void;\r\n  onEdit?: (item: T) => void;\r\n  onDelete?: (item: T) => void;\r\n  onView?: (item: T) => void;\r\n  onCustomAction?: (item: T) => void;\r\n  customActionIcon?: React.ReactNode;\r\n  customActionTitle?: string;\r\n  customActionColor?: string;\r\n  searchPlaceholder?: string;\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport default function DataTable<T = any>({\r\n  title,\r\n  data,\r\n  columns,\r\n  onAdd,\r\n  onEdit,\r\n  onDelete,\r\n  onView,\r\n  onCustomAction,\r\n  customActionIcon,\r\n  customActionTitle = \"Custom Action\",\r\n  // customActionColor = \"purple-600\",\r\n  searchPlaceholder = \"Cari data...\"\r\n}: DataTableProps<T>) {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 10;\r\n\r\n  // Filter data based on search term\r\n  const filteredData = data.filter((item) =>\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    Object.values(item as Record<string, any>).some((value) =>\r\n      String(value).toLowerCase().includes(searchTerm.toLowerCase())\r\n    )\r\n  );\r\n\r\n  // Pagination\r\n  const totalPages = Math.ceil(filteredData.length / itemsPerPage);\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const paginatedData = filteredData.slice(startIndex, startIndex + itemsPerPage);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900\">{title}</h2>\r\n          <p className=\"text-gray-600 mt-1\">Total: {filteredData.length} data</p>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col sm:flex-row gap-3\">\r\n          {/* Search */}\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder={searchPlaceholder}\r\n              value={searchTerm}\r\n              onChange={(e) => {\r\n                setSearchTerm(e.target.value);\r\n                setCurrentPage(1);\r\n              }}\r\n              className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n\r\n          {/* Add Button */}\r\n          {onAdd && (\r\n            <button\r\n              onClick={onAdd}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              <Plus className=\"w-4 h-4\" />\r\n              Tambah\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"min-w-full divide-y divide-gray-200\">\r\n          <thead className=\"bg-gray-50\">\r\n            <tr>\r\n              {columns.map((column) => (\r\n                <th\r\n                  key={column.key}\r\n                  className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                >\r\n                  {column.label}\r\n                </th>\r\n              ))}\r\n              {(onEdit || onDelete || onView || onCustomAction) && (\r\n                <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Aksi\r\n                </th>\r\n              )}\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-gray-200\">\r\n            {paginatedData.length === 0 ? (\r\n              <tr>\r\n                <td\r\n                  colSpan={columns.length + (onEdit || onDelete || onView || onCustomAction ? 1 : 0)}\r\n                  className=\"px-6 py-8 text-center text-gray-500\"\r\n                >\r\n                  {searchTerm ? \"Tidak ada data yang sesuai pencarian\" : \"Belum ada data\"}\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              paginatedData.map((item, index) => (\r\n                <tr key={index} className=\"hover:bg-gray-50\">\r\n                  {columns.map((column) => (\r\n                    <td key={column.key} className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                      {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\r\n                      {column.render ? column.render((item as any)[column.key], item) : String((item as any)[column.key] || '')}\r\n                    </td>\r\n                  ))}\r\n                  {(onEdit || onDelete || onView || onCustomAction) && (\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                      <div className=\"flex flex-col items-center justify-center gap-2\">\r\n                        {onCustomAction && (\r\n                          <button\r\n                            onClick={() => onCustomAction(item)}\r\n                            className=\"flex items-center justify-center gap-2 px-3 py-1 w-20 bg-purple-300 text-purple-600 hover:bg-purple-400/80 rounded transition-colors\"\r\n                            title={customActionTitle}\r\n                          >\r\n                            {customActionIcon || <Plus className=\"w-4 h-4\" />}\r\n                            <p className=\"text-sm\">Poin</p>\r\n                          </button>\r\n                        )}\r\n                        {onView && (\r\n                          <button\r\n                            onClick={() => onView(item)}\r\n                            className=\"flex items-center justify-center gap-2 px-3 py-1 w-20 bg-blue-300 text-blue-600 hover:bg-blue-400/80 rounded transition-colors\"\r\n                            title=\"Lihat\"\r\n                          >\r\n                            <Eye className=\"w-4 h-4\" />\r\n                            <p className=\"text-sm\">Lihat</p>\r\n                          </button>\r\n                        )}\r\n                        {onEdit && (\r\n                          <button\r\n                            onClick={() => onEdit(item)}\r\n                            className=\"flex items-center justify-center gap-2 px-3 py-1 w-20 bg-green-300 text-green-600 hover:bg-green-400/80 rounded transition-colors\"\r\n                            title=\"Edit\"\r\n                          >\r\n                            <Edit className=\"w-4 h-4\" />\r\n                            <p className=\"text-sm\">Edit</p>\r\n                          </button>\r\n                        )}\r\n                        {onDelete && (\r\n                          <button\r\n                            onClick={() => onDelete(item)}\r\n                            className=\"flex items-center justify-center gap-2 px-3 py-1 w-20 bg-red-300 text-red-600 hover:bg-red-400/80 rounded transition-colors\"\r\n                            title=\"Hapus\"\r\n                          >\r\n                            <Trash2 className=\"w-4 h-4\" />\r\n                            <p className=\"text-sm\">Hapus</p>\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              ))\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"flex items-center justify-between mt-6\">\r\n          <div className=\"text-sm text-gray-700\">\r\n            Menampilkan {startIndex + 1} - {Math.min(startIndex + itemsPerPage, filteredData.length)} dari {filteredData.length} data\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\r\n              disabled={currentPage === 1}\r\n              className=\"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50\"\r\n            >\r\n              Prev\r\n            </button>\r\n\r\n            {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n              <button\r\n                key={page}\r\n                onClick={() => setCurrentPage(page)}\r\n                className={`px-3 py-1 border rounded-md ${currentPage === page\r\n                  ? \"bg-blue-600 text-white border-blue-600\"\r\n                  : \"border-gray-300 hover:bg-gray-50\"\r\n                  }`}\r\n              >\r\n                {page}\r\n              </button>\r\n            ))}\r\n\r\n            <button\r\n              onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\r\n              disabled={currentPage === totalPages}\r\n              className=\"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50\"\r\n            >\r\n              Next\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus%20TUF%20Gaming/Documents/KULIAH/Pengabdian%20Website%20Posyandu/bukadita_backoffice/src/lib/api/quiz.ts"],"sourcesContent":["import { apiFetch } from \"./client\";\r\n\r\n// Types for Quiz Management\r\nexport interface QuizRecord {\r\n  id: string | number;\r\n  sub_materi_id: string | number;\r\n  title: string;\r\n  description?: string;\r\n  time_limit_seconds?: number;\r\n  passing_score?: number;\r\n  published?: boolean; // Preferred field per API documentation\r\n  is_active?: boolean; // Actual field used by backend\r\n  quiz_type?: string; // Backend includes this field\r\n  module_id?: string | number; // Backend includes this field\r\n  created_at?: string;\r\n  updated_at?: string;\r\n  created_by?: string;\r\n  updated_by?: string;\r\n  questions?: QuizQuestion[];\r\n  // Joined data from sub_materi and module\r\n  sub_materi?: {\r\n    id: string | number;\r\n    title: string;\r\n    published?: boolean;\r\n  };\r\n  module?: {\r\n    id: string | number;\r\n    title: string;\r\n  };\r\n  sub_materi_title?: string; // Legacy field\r\n  module_title?: string; // Legacy field\r\n}\r\n\r\nexport interface SubMateriOption {\r\n  id: string | number;\r\n  title: string;\r\n  module_title: string;\r\n  display_title: string; // \"Module Title - Sub Materi Title\"\r\n}\r\n\r\nexport interface QuizQuestion {\r\n  id: string | number;\r\n  quiz_id: string | number;\r\n  question_text: string;\r\n  options: string[]; // Array of options like [\"Option A\", \"Option B\", \"Option C\"]\r\n  correct_answer_index: number; // Index of correct option (0-based)\r\n  explanation?: string;\r\n  order_index?: number;\r\n}\r\n\r\nexport interface QuizAttempt {\r\n  id: string | number;\r\n  quiz_id: string | number;\r\n  user_id: string;\r\n  score?: number;\r\n  passed?: boolean;\r\n  total_questions?: number;\r\n  correct_answers?: number;\r\n  answers: QuizAnswer[];\r\n  started_at?: string;\r\n  completed_at?: string;\r\n}\r\n\r\nexport interface QuizAnswer {\r\n  question_id: string | number;\r\n  selected_index: number;\r\n  is_correct?: boolean; // For display purposes in admin\r\n}\r\n\r\n// Backend API Response Structure (per API documentation)\r\nexport interface QuizApiResponse<T> {\r\n  success: boolean;\r\n  code: string;\r\n  message: string;\r\n  data:\r\n    | {\r\n        quizzes?: T[]; // GET /api/v1/admin/quizzes returns quizzes array\r\n        pagination?: {\r\n          page: number;\r\n          limit: number;\r\n          total: number;\r\n          totalPages: number;\r\n        };\r\n      }\r\n    | T; // Single item responses return data directly\r\n}\r\n\r\n// Legacy support for existing code\r\nexport interface PaginatedResponse<T> {\r\n  items?: T[];\r\n  quizzes?: T[]; // Support both formats\r\n  pagination?: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n  };\r\n}\r\n\r\n// Quiz CRUD Operations\r\nexport const quizService = {\r\n  // Get sub materi options for dropdown\r\n  getSubMateriOptions: async () => {\r\n    return apiFetch<SubMateriOption[]>(`/api/v1/admin/quiz-sub-materis`, {\r\n      method: \"GET\",\r\n    });\r\n  },\r\n\r\n  // List quizzes with optional filtering (Admin)\r\n  // Returns: { success: true, data: { quizzes: [...], pagination: {...} } }\r\n  list: async (\r\n    params: {\r\n      sub_materi_id?: string | number;\r\n      module_id?: string | number; // Support module_id for backward compatibility\r\n      page?: number;\r\n      limit?: number;\r\n      published?: boolean;\r\n    } = {}\r\n  ) => {\r\n    const query = new URLSearchParams();\r\n    if (params.sub_materi_id)\r\n      query.set(\"sub_materi_id\", String(params.sub_materi_id));\r\n    if (params.module_id) query.set(\"module_id\", String(params.module_id));\r\n    if (params.page) query.set(\"page\", String(params.page));\r\n    if (params.limit) query.set(\"limit\", String(params.limit));\r\n    if (params.published !== undefined)\r\n      query.set(\"published\", String(params.published));\r\n\r\n    // Return the response structure that matches backend API documentation\r\n    // The apiFetch should return: { success: true, data: { quizzes: [...] } }\r\n    return apiFetch<PaginatedResponse<QuizRecord>>(\r\n      `/api/v1/admin/quizzes?${query.toString()}`,\r\n      { method: \"GET\" }\r\n    );\r\n  },\r\n\r\n  // Get single quiz with questions (Admin)\r\n  get: async (id: string | number) => {\r\n    return apiFetch<QuizRecord>(\r\n      `/api/v1/admin/quizzes/${encodeURIComponent(String(id))}`,\r\n      { method: \"GET\" }\r\n    );\r\n  },\r\n\r\n  // Create new quiz (Admin)\r\n  create: async (payload: {\r\n    sub_materi_id?: string | number;\r\n    module_id?: string | number; // Support module_id for backward compatibility\r\n    title: string;\r\n    description?: string;\r\n    time_limit_seconds?: number;\r\n    passing_score?: number;\r\n    published?: boolean;\r\n  }) => {\r\n    return apiFetch<QuizRecord>(`/api/v1/admin/quizzes`, {\r\n      method: \"POST\",\r\n      body: payload,\r\n    });\r\n  },\r\n\r\n  // Update quiz (Admin)\r\n  update: async (\r\n    id: string | number,\r\n    payload: {\r\n      title?: string;\r\n      description?: string;\r\n      time_limit_seconds?: number;\r\n      passing_score?: number;\r\n      published?: boolean;\r\n    }\r\n  ) => {\r\n    return apiFetch<QuizRecord>(\r\n      `/api/v1/admin/quizzes/${encodeURIComponent(String(id))}`,\r\n      {\r\n        method: \"PUT\",\r\n        body: payload,\r\n      }\r\n    );\r\n  },\r\n\r\n  // Delete quiz (Admin)\r\n  remove: async (id: string | number) => {\r\n    return apiFetch<{ ok: boolean }>(\r\n      `/api/v1/admin/quizzes/${encodeURIComponent(String(id))}`,\r\n      { method: \"DELETE\" }\r\n    );\r\n  },\r\n\r\n  // Add question to quiz (Admin)\r\n  addQuestion: async (\r\n    quizId: string | number,\r\n    payload: {\r\n      question_text: string;\r\n      options: string[];\r\n      correct_answer_index: number;\r\n      explanation?: string;\r\n      order_index?: number;\r\n    }\r\n  ) => {\r\n    return apiFetch<QuizQuestion>(\r\n      `/api/v1/admin/quizzes/${encodeURIComponent(String(quizId))}/questions`,\r\n      {\r\n        method: \"POST\",\r\n        body: payload,\r\n      }\r\n    );\r\n  },\r\n\r\n  // Update question (Admin)\r\n  updateQuestion: async (\r\n    questionId: string | number,\r\n    payload: {\r\n      question_text?: string;\r\n      options?: string[];\r\n      correct_answer_index?: number;\r\n      explanation?: string;\r\n      order_index?: number;\r\n    }\r\n  ) => {\r\n    // Try admin endpoint first\r\n    const adminResult = await apiFetch<QuizQuestion>(\r\n      `/api/v1/admin/quiz-questions/${encodeURIComponent(String(questionId))}`,\r\n      {\r\n        method: \"PUT\",\r\n        body: payload,\r\n      }\r\n    );\r\n\r\n    if (\r\n      adminResult.ok ||\r\n      (adminResult.status !== 404 && adminResult.status !== 405)\r\n    ) {\r\n      return adminResult;\r\n    }\r\n\r\n    // Fallback to regular endpoint\r\n    return apiFetch<QuizQuestion>(\r\n      `/api/v1/quiz-questions/${encodeURIComponent(String(questionId))}`,\r\n      {\r\n        method: \"PUT\",\r\n        body: payload,\r\n      }\r\n    );\r\n  },\r\n\r\n  // Delete question (Admin)\r\n  removeQuestion: async (questionId: string | number) => {\r\n    // Try admin endpoint first\r\n    const adminResult = await apiFetch<{ ok: boolean }>(\r\n      `/api/v1/admin/quiz-questions/${encodeURIComponent(String(questionId))}`,\r\n      { method: \"DELETE\" }\r\n    );\r\n\r\n    if (\r\n      adminResult.ok ||\r\n      (adminResult.status !== 404 && adminResult.status !== 405)\r\n    ) {\r\n      return adminResult;\r\n    }\r\n\r\n    // Fallback to regular endpoint\r\n    return apiFetch<{ ok: boolean }>(\r\n      `/api/v1/quiz-questions/${encodeURIComponent(String(questionId))}`,\r\n      { method: \"DELETE\" }\r\n    );\r\n  },\r\n\r\n  // Submit quiz attempt (for testing/admin preview)\r\n  submitAttempt: async (\r\n    quizId: string | number,\r\n    answers: { question_id: string | number; selected_index: number }[],\r\n    startedAt?: string\r\n  ) => {\r\n    const payload = {\r\n      answers,\r\n      ...(startedAt && { started_at: startedAt }),\r\n    };\r\n\r\n    return apiFetch<QuizAttempt>(\r\n      `/api/v1/quizzes/${encodeURIComponent(String(quizId))}/attempts`,\r\n      {\r\n        method: \"POST\",\r\n        body: payload,\r\n      }\r\n    );\r\n  },\r\n\r\n  // Get attempts for a quiz (admin only)\r\n  getAttempts: async (\r\n    quizId: string | number,\r\n    params: {\r\n      page?: number;\r\n      limit?: number;\r\n      user_id?: string;\r\n    } = {}\r\n  ) => {\r\n    const query = new URLSearchParams();\r\n    if (params.page) query.set(\"page\", String(params.page));\r\n    if (params.limit) query.set(\"limit\", String(params.limit));\r\n    if (params.user_id) query.set(\"user_id\", String(params.user_id));\r\n\r\n    return apiFetch<PaginatedResponse<QuizAttempt>>(\r\n      `/api/v1/quizzes/${encodeURIComponent(\r\n        String(quizId)\r\n      )}/attempts?${query.toString()}`,\r\n      { method: \"GET\" }\r\n    );\r\n  },\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 528, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus%20TUF%20Gaming/Documents/KULIAH/Pengabdian%20Website%20Posyandu/bukadita_backoffice/src/lib/api/poin-details.ts"],"sourcesContent":["import { apiFetch } from \"./client\";\r\n\r\n// Types for Media Items\r\nexport interface MediaItem {\r\n  id: string;\r\n  poin_detail_id: string;\r\n  file_url: string;\r\n  mime_type: string;\r\n  original_filename: string;\r\n  file_size: number;\r\n  caption?: string;\r\n  storage_path: string;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\n// Types for Poin Details Management\r\nexport interface PoinDetailRecord {\r\n  id: string | number;\r\n  sub_materi_id: string | number;\r\n  title: string;\r\n  content_html: string;\r\n  duration_label?: string;\r\n  order_index: number;\r\n  duration_minutes?: number;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n  poin_media?: MediaItem[];\r\n}\r\n\r\nexport interface PaginatedResponse<T> {\r\n  items: T[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n  };\r\n}\r\n\r\n// Enhanced Material Record with Poin Details\r\nexport interface MaterialRecordWithPoins {\r\n  id: string | number;\r\n  title: string;\r\n  content: string;\r\n  slug?: string;\r\n  published?: boolean;\r\n  module_id?: string | number;\r\n  order_index?: number;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n  poin_details?: PoinDetailRecord[];\r\n}\r\n\r\n// Poin Details CRUD Operations\r\nexport const poinDetailService = {\r\n  // List poin details for a sub_materi\r\n  list: async (\r\n    subMateriId: string | number,\r\n    params: {\r\n      page?: number;\r\n      limit?: number;\r\n    } = {}\r\n  ) => {\r\n    const query = new URLSearchParams();\r\n    if (params.page) query.set(\"page\", String(params.page));\r\n    if (params.limit) query.set(\"limit\", String(params.limit));\r\n\r\n    // Add include_drafts parameter\r\n    query.set(\"include_drafts\", \"true\");\r\n\r\n    // Try admin endpoint first with include_drafts\r\n    const adminResult = await apiFetch<PaginatedResponse<PoinDetailRecord>>(\r\n      `/api/v1/admin/sub-materis/${encodeURIComponent(\r\n        String(subMateriId)\r\n      )}/poins?${query.toString()}`,\r\n      { method: \"GET\" }\r\n    );\r\n\r\n    if (\r\n      adminResult.ok ||\r\n      (adminResult.status !== 404 && adminResult.status !== 405)\r\n    ) {\r\n      return adminResult;\r\n    }\r\n\r\n    // Fallback to regular materials endpoint\r\n    return apiFetch<PaginatedResponse<PoinDetailRecord>>(\r\n      `/api/v1/sub-materis/${encodeURIComponent(\r\n        String(subMateriId)\r\n      )}/poins?${query.toString()}`,\r\n      { method: \"GET\" }\r\n    );\r\n  },\r\n\r\n  // Get single poin detail\r\n  get: async (id: string | number) => {\r\n    // Try admin endpoint first\r\n    const adminResult = await apiFetch<PoinDetailRecord>(\r\n      `/api/v1/admin/poins/${encodeURIComponent(String(id))}`,\r\n      { method: \"GET\" }\r\n    );\r\n\r\n    if (\r\n      adminResult.ok ||\r\n      (adminResult.status !== 404 && adminResult.status !== 405)\r\n    ) {\r\n      return adminResult;\r\n    }\r\n\r\n    // Fallback to regular endpoint\r\n    return apiFetch<PoinDetailRecord>(\r\n      `/api/v1/poins/${encodeURIComponent(String(id))}`,\r\n      { method: \"GET\" }\r\n    );\r\n  },\r\n\r\n  // Create new poin detail\r\n  create: async (payload: {\r\n    sub_materi_id: string | number;\r\n    title: string;\r\n    content_html: string;\r\n    duration_label?: string;\r\n    order_index: number;\r\n    duration_minutes?: number;\r\n  }) => {\r\n    console.log(\"Creating poin with payload:\", payload);\r\n\r\n    // Try admin endpoint first\r\n    const adminResult = await apiFetch<PoinDetailRecord>(\r\n      `/api/v1/admin/sub-materis/${encodeURIComponent(\r\n        String(payload.sub_materi_id)\r\n      )}/poins`,\r\n      {\r\n        method: \"POST\",\r\n        body: payload,\r\n      }\r\n    );\r\n\r\n    console.log(\"Admin result:\", adminResult);\r\n    if (!adminResult.ok) {\r\n      console.error(\"Admin endpoint error:\", adminResult.error);\r\n      console.error(\"Raw response:\", JSON.stringify(adminResult.raw, null, 2));\r\n    }\r\n\r\n    if (\r\n      adminResult.ok ||\r\n      (adminResult.status !== 404 && adminResult.status !== 405)\r\n    ) {\r\n      return adminResult;\r\n    }\r\n\r\n    // Fallback to regular endpoint\r\n    return apiFetch<PoinDetailRecord>(`/api/v1/poins`, {\r\n      method: \"POST\",\r\n      body: payload,\r\n    });\r\n  },\r\n\r\n  // Update poin detail\r\n  update: async (\r\n    id: string | number,\r\n    payload: {\r\n      title?: string;\r\n      content_html?: string;\r\n      duration_label?: string;\r\n      order_index?: number;\r\n      duration_minutes?: number;\r\n    }\r\n  ) => {\r\n    // Filter only valid fields to prevent backend errors with non-existent columns\r\n    const validPayload: Record<string, unknown> = {};\r\n    if (payload.title !== undefined) validPayload.title = payload.title;\r\n    if (payload.content_html !== undefined)\r\n      validPayload.content_html = payload.content_html;\r\n    if (payload.duration_label !== undefined)\r\n      validPayload.duration_label = payload.duration_label;\r\n    if (payload.order_index !== undefined)\r\n      validPayload.order_index = payload.order_index;\r\n    if (payload.duration_minutes !== undefined)\r\n      validPayload.duration_minutes = payload.duration_minutes;\r\n\r\n    console.log(\"Updating poin with ID:\", id);\r\n    console.log(\"Update payload:\", validPayload);\r\n\r\n    // Try admin endpoint first\r\n    const adminResult = await apiFetch<PoinDetailRecord>(\r\n      `/api/v1/admin/poins/${encodeURIComponent(String(id))}`,\r\n      {\r\n        method: \"PUT\",\r\n        body: validPayload,\r\n      }\r\n    );\r\n\r\n    console.log(\"Update result:\", adminResult);\r\n    if (!adminResult.ok) {\r\n      console.error(\"Update error:\", adminResult.error);\r\n      console.error(\"Raw response:\", JSON.stringify(adminResult.raw, null, 2));\r\n    }\r\n\r\n    if (\r\n      adminResult.ok ||\r\n      (adminResult.status !== 404 && adminResult.status !== 405)\r\n    ) {\r\n      return adminResult;\r\n    }\r\n\r\n    // Fallback to regular endpoint\r\n    return apiFetch<PoinDetailRecord>(\r\n      `/api/v1/poins/${encodeURIComponent(String(id))}`,\r\n      {\r\n        method: \"PUT\",\r\n        body: validPayload,\r\n      }\r\n    );\r\n  },\r\n\r\n  // Delete poin detail\r\n  remove: async (id: string | number) => {\r\n    // Try admin endpoint first\r\n    const adminResult = await apiFetch<{ ok: boolean }>(\r\n      `/api/v1/admin/poins/${encodeURIComponent(String(id))}`,\r\n      { method: \"DELETE\" }\r\n    );\r\n\r\n    if (\r\n      adminResult.ok ||\r\n      (adminResult.status !== 404 && adminResult.status !== 405)\r\n    ) {\r\n      return adminResult;\r\n    }\r\n\r\n    // Fallback to regular endpoint\r\n    return apiFetch<{ ok: boolean }>(\r\n      `/api/v1/poins/${encodeURIComponent(String(id))}`,\r\n      { method: \"DELETE\" }\r\n    );\r\n  },\r\n\r\n  // Mark poin as complete (for testing progress flow)\r\n  markComplete: async (poinId: string | number, materiId?: string | number) => {\r\n    // Try both admin and regular endpoints\r\n    const endpoints = [\r\n      `/api/v1/admin/sub-materis/${materiId}/points/${poinId}/complete`,\r\n      `/api/v1/materials/${materiId}/points/${poinId}/complete`,\r\n      `/api/v1/admin/points/${poinId}/complete`,\r\n      `/api/v1/points/${poinId}/complete`,\r\n    ];\r\n\r\n    for (const endpoint of endpoints) {\r\n      try {\r\n        const result = await apiFetch<{\r\n          ok: boolean;\r\n          progress?: Record<string, unknown>;\r\n        }>(endpoint, {\r\n          method: \"POST\",\r\n        });\r\n        if (result.ok) return result;\r\n      } catch {\r\n        // Continue to next endpoint if this one fails\r\n        continue;\r\n      }\r\n    }\r\n\r\n    // If all fail, return error\r\n    return {\r\n      ok: false,\r\n      status: 404,\r\n      error: \"Complete endpoint not found\",\r\n    } as const;\r\n  },\r\n};\r\n\r\n// Enhanced Materials Service with Poin Details\r\nexport const enhancedMaterialService = {\r\n  // Get material with poin details - try admin endpoint first, then fallback\r\n  getWithPoins: async (id: string | number) => {\r\n    // Try admin endpoint first with include_drafts and include_media parameters\r\n    const adminResultWithDrafts = await apiFetch<MaterialRecordWithPoins>(\r\n      `/api/v1/admin/sub-materis/${encodeURIComponent(\r\n        String(id)\r\n      )}?include_drafts=true&include_media=true&with_media=true`,\r\n      { method: \"GET\" }\r\n    );\r\n\r\n    if (adminResultWithDrafts.ok) {\r\n      return adminResultWithDrafts;\r\n    }\r\n\r\n    // Try admin endpoint with media inclusion\r\n    const adminResult = await apiFetch<MaterialRecordWithPoins>(\r\n      `/api/v1/admin/sub-materis/${encodeURIComponent(\r\n        String(id)\r\n      )}?include_media=true&with_media=true`,\r\n      { method: \"GET\" }\r\n    );\r\n\r\n    if (\r\n      adminResult.ok ||\r\n      (adminResult.status !== 404 && adminResult.status !== 405)\r\n    ) {\r\n      return adminResult;\r\n    }\r\n\r\n    // Try regular materials endpoint with admin flag and media inclusion\r\n    const regularWithAdmin = await apiFetch<MaterialRecordWithPoins>(\r\n      `/api/v1/materials/${encodeURIComponent(\r\n        String(id)\r\n      )}?admin=true&include_drafts=true&include_media=true&with_media=true`,\r\n      { method: \"GET\" }\r\n    );\r\n\r\n    if (regularWithAdmin.ok) {\r\n      return regularWithAdmin;\r\n    }\r\n\r\n    // Try alternative admin endpoint for getting material with poins and media\r\n    const altAdminWithMedia = await apiFetch<MaterialRecordWithPoins>(\r\n      `/api/v1/admin/sub-materis/${encodeURIComponent(String(id))}/with-media`,\r\n      { method: \"GET\" }\r\n    );\r\n\r\n    if (altAdminWithMedia.ok) {\r\n      return altAdminWithMedia;\r\n    }\r\n\r\n    // Final fallback to regular materials endpoint with media params\r\n    return apiFetch<MaterialRecordWithPoins>(\r\n      `/api/v1/materials/${encodeURIComponent(String(id))}?include_media=true`,\r\n      { method: \"GET\" }\r\n    );\r\n  },\r\n\r\n  // Update material order index - try admin endpoint first, then fallback\r\n  updateOrder: async (id: string | number, order_index: number) => {\r\n    // Try admin endpoint first\r\n    const adminResult = await apiFetch<MaterialRecordWithPoins>(\r\n      `/api/v1/admin/sub-materis/${encodeURIComponent(String(id))}`,\r\n      {\r\n        method: \"PUT\",\r\n        body: { order_index },\r\n      }\r\n    );\r\n\r\n    if (\r\n      adminResult.ok ||\r\n      (adminResult.status !== 404 && adminResult.status !== 405)\r\n    ) {\r\n      return adminResult;\r\n    }\r\n\r\n    // Fallback to regular materials endpoint\r\n    return apiFetch<MaterialRecordWithPoins>(\r\n      `/api/v1/materials/${encodeURIComponent(String(id))}`,\r\n      {\r\n        method: \"PUT\",\r\n        body: { order_index },\r\n      }\r\n    );\r\n  },\r\n\r\n  // Create poin with media files in one request\r\n  createWithMedia: async (payload: {\r\n    sub_materi_id: string | number;\r\n    title: string;\r\n    content_html: string;\r\n    duration_label?: string;\r\n    duration_minutes?: number;\r\n    order_index?: number;\r\n    files?: File[];\r\n    captions?: string[];\r\n  }) => {\r\n    const formData = new FormData();\r\n\r\n    // Append poin data\r\n    formData.append(\"title\", payload.title);\r\n    formData.append(\"content_html\", payload.content_html);\r\n    if (payload.duration_label)\r\n      formData.append(\"duration_label\", payload.duration_label);\r\n    if (payload.duration_minutes)\r\n      formData.append(\"duration_minutes\", String(payload.duration_minutes));\r\n    if (payload.order_index)\r\n      formData.append(\"order_index\", String(payload.order_index));\r\n\r\n    // Append media files\r\n    if (payload.files && payload.files.length > 0) {\r\n      payload.files.forEach((file) => {\r\n        formData.append(\"media\", file);\r\n      });\r\n\r\n      // Append captions if provided\r\n      if (payload.captions && payload.captions.length > 0) {\r\n        formData.append(\"captions\", JSON.stringify(payload.captions));\r\n      }\r\n    }\r\n\r\n    console.log(\r\n      \"Creating poin with media, sub_materi_id:\",\r\n      payload.sub_materi_id\r\n    );\r\n\r\n    return apiFetch<PoinDetailRecord>(\r\n      `/api/v1/admin/sub-materis/${encodeURIComponent(\r\n        String(payload.sub_materi_id)\r\n      )}/poins-with-media`,\r\n      {\r\n        method: \"POST\",\r\n        body: formData,\r\n      }\r\n    );\r\n  },\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 749, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus%20TUF%20Gaming/Documents/KULIAH/Pengabdian%20Website%20Posyandu/bukadita_backoffice/src/components/admin/MaterialPreview.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { FileText, ImageIcon, Download } from \"lucide-react\";\r\nimport { type PoinDetailRecord, type MediaItem } from \"@/lib/api/poin-details\";\r\n\r\ninterface MaterialPreviewProps {\r\n  poins: PoinDetailRecord[];\r\n  materialTitle: string;\r\n}\r\n\r\nexport default function MaterialPreview({ poins, materialTitle }: MaterialPreviewProps) {\r\n  const [imageErrors, setImageErrors] = useState<Set<string>>(new Set());\r\n\r\n\r\n\r\n  const getPoinMedia = (poin: PoinDetailRecord): MediaItem[] => {\r\n    return poin.poin_media || [];\r\n  };\r\n\r\n  // Process HTML content with media placeholders\r\n  const processContentWithMedia = (html: string, media: MediaItem[]) => {\r\n    if (!html) return { processedHtml: '', hasMedia: false };\r\n\r\n    let processedHtml = html;\r\n    let hasMediaPlaceholders = false;\r\n\r\n    // First, try to find and replace media placeholders by matching media ID\r\n    media.forEach((mediaItem) => {\r\n\r\n      // Try with media ID first (for new content)\r\n      const mediaIdPlaceholderPattern = new RegExp(`\\\\[MEDIA_PLACEHOLDER_${mediaItem.id}\\\\]`, 'g');\r\n      const mediaIdDivPattern = new RegExp(\r\n        `<div[^>]*data-block-id=\"${mediaItem.id}\"[^>]*>\\\\[MEDIA_PLACEHOLDER_${mediaItem.id}\\\\]</div>`,\r\n        'g'\r\n      );\r\n\r\n      if (processedHtml.includes(`MEDIA_PLACEHOLDER_${mediaItem.id}`)) {\r\n        hasMediaPlaceholders = true;\r\n        const mediaHtml = generateMediaHtml(mediaItem);\r\n        processedHtml = processedHtml.replace(mediaIdDivPattern, mediaHtml);\r\n        processedHtml = processedHtml.replace(mediaIdPlaceholderPattern, mediaHtml);\r\n      }\r\n    });\r\n\r\n    // If no placeholders found with media IDs, try to find any MEDIA_PLACEHOLDER and match by order\r\n    if (!hasMediaPlaceholders) {\r\n      const placeholderMatches = [...processedHtml.matchAll(/<div[^>]*data-block-type=\"media\"[^>]*data-block-order=\"(\\d+)\"[^>]*>\\[MEDIA_PLACEHOLDER_([^\\]]+)\\]<\\/div>/g)];\r\n\r\n      if (placeholderMatches.length > 0) {\r\n        hasMediaPlaceholders = true;\r\n\r\n        // Sort placeholders by order and media by created_at (to maintain input order)\r\n        const sortedMedia = [...media].sort((a, b) => {\r\n          if (a.created_at && b.created_at) {\r\n            return new Date(a.created_at).getTime() - new Date(b.created_at).getTime();\r\n          }\r\n          return 0; // Keep original order if no created_at\r\n        });\r\n\r\n        placeholderMatches\r\n          .sort((a, b) => parseInt(a[1]) - parseInt(b[1])) // Sort by data-block-order\r\n          .forEach((match, index) => {\r\n            if (sortedMedia[index]) {\r\n              const mediaHtml = generateMediaHtml(sortedMedia[index]);\r\n              processedHtml = processedHtml.replace(match[0], mediaHtml);\r\n            }\r\n          });\r\n      }\r\n    }\r\n\r\n    // If still no placeholders found, try to find any MEDIA_PLACEHOLDER and replace sequentially\r\n    if (!hasMediaPlaceholders) {\r\n      const anyPlaceholderPattern = /\\[MEDIA_PLACEHOLDER_[^\\]]+\\]/g;\r\n      const placeholderMatches = processedHtml.match(anyPlaceholderPattern);\r\n\r\n      if (placeholderMatches && placeholderMatches.length > 0) {\r\n        hasMediaPlaceholders = true;\r\n\r\n        // Sort media by created_at to maintain input order\r\n        const sortedMedia = [...media].sort((a, b) => {\r\n          if (a.created_at && b.created_at) {\r\n            return new Date(a.created_at).getTime() - new Date(b.created_at).getTime();\r\n          }\r\n          return 0;\r\n        });\r\n\r\n        placeholderMatches.forEach((placeholder, index) => {\r\n          if (sortedMedia[index]) {\r\n            const mediaHtml = generateMediaHtml(sortedMedia[index]);\r\n            processedHtml = processedHtml.replace(placeholder, mediaHtml);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    return { processedHtml, hasMedia: hasMediaPlaceholders || media.length > 0 };\r\n  };\r\n\r\n  const generateMediaHtml = (media: MediaItem): string => {\r\n    const mimeType = media.mime_type;\r\n\r\n    if (mimeType?.startsWith('image/')) {\r\n      return `\r\n        <div class=\"my-4\">\r\n          <div class=\"relative\">\r\n            <img \r\n              src=\"${media.file_url}\" \r\n              alt=\"${media.caption || 'Gambar'}\"\r\n              class=\"w-full max-w-3xl rounded-lg shadow-sm\"\r\n              loading=\"lazy\"\r\n              style=\"display: none;\"\r\n              onload=\"this.style.display='block'; this.nextElementSibling.style.display='none';\"\r\n              onerror=\"this.style.display='none'; this.nextElementSibling.innerHTML='<div class=&quot;bg-gray-100 rounded-lg flex items-center justify-center h-32&quot;><div class=&quot;text-center text-gray-500&quot;><p class=&quot;text-sm&quot;>Gambar tidak dapat dimuat</p></div></div>';\"\r\n            />\r\n            <div class=\"bg-gray-50 rounded-lg flex items-center justify-center h-32\">\r\n              <div class=\"text-center text-gray-500\">\r\n                <div class=\"animate-spin w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full mx-auto mb-2\"></div>\r\n                <p class=\"text-sm\">Memuat gambar...</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          ${media.caption ? `<p class=\"text-sm text-gray-600 mt-2 italic\">${media.caption}</p>` : ''}\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    if (mimeType?.startsWith('video/')) {\r\n      return `\r\n        <div class=\"my-4\">\r\n          <video src=\"${media.file_url}\" controls class=\"w-full max-w-3xl rounded-lg shadow-sm\" preload=\"metadata\">\r\n            Browser tidak mendukung video.\r\n          </video>\r\n          ${media.caption ? `<p class=\"text-sm text-gray-600 mt-2 italic\">${media.caption}</p>` : ''}\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    if (mimeType?.startsWith('audio/')) {\r\n      return `\r\n        <div class=\"my-4\">\r\n          <audio src=\"${media.file_url}\" controls class=\"w-full max-w-md\" preload=\"metadata\">Browser tidak mendukung audio.</audio>\r\n          ${media.caption ? `<p class=\"text-sm text-gray-600 mt-2 italic\">${media.caption}</p>` : ''}\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    // Other file types\r\n    return `\r\n      <div class=\"my-4\">\r\n        <a href=\"${media.file_url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"inline-flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\">\r\n          ${mimeType === 'application/pdf' ? 'Buka PDF' : 'Download File'}\r\n        </a>\r\n        ${media.caption ? `<p class=\"text-sm text-gray-600 mt-2 italic\">${media.caption}</p>` : ''}\r\n      </div>\r\n    `;\r\n  };\r\n\r\n\r\n\r\n  const renderMediaItem = (media: MediaItem) => {\r\n    const mimeType = media.mime_type;\r\n\r\n    if (mimeType?.startsWith('image/')) {\r\n      if (imageErrors.has(media.id)) {\r\n        return (\r\n          <div className=\"bg-gray-100 border border-gray-200 rounded-lg flex items-center justify-center h-32\">\r\n            <div className=\"text-center text-gray-500\">\r\n              <ImageIcon className=\"w-8 h-8 mx-auto mb-2\" />\r\n              <p className=\"text-sm\">Gambar tidak dapat dimuat</p>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      return (\r\n        <div className=\"relative\">\r\n          <Image\r\n            src={media.file_url}\r\n            alt={media.caption || 'Gambar'}\r\n            width={800}\r\n            height={600}\r\n            className=\"w-full max-w-3xl rounded-lg shadow-sm\"\r\n            unoptimized\r\n            onError={() => setImageErrors(prev => new Set(prev).add(media.id))}\r\n            onLoad={() => {\r\n              setImageErrors(prev => {\r\n                const newSet = new Set(prev);\r\n                newSet.delete(media.id);\r\n                return newSet;\r\n              });\r\n            }}\r\n          />\r\n          {media.caption && <p className=\"text-sm text-gray-600 mt-2 italic\">{media.caption}</p>}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (mimeType?.startsWith('video/')) {\r\n      return (\r\n        <div>\r\n          <video src={media.file_url} controls className=\"w-full max-w-3xl rounded-lg shadow-sm\" preload=\"metadata\">\r\n            Browser tidak mendukung video.\r\n          </video>\r\n          {media.caption && <p className=\"text-sm text-gray-600 mt-2 italic\">{media.caption}</p>}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (mimeType?.startsWith('audio/')) {\r\n      return (\r\n        <div>\r\n          <audio src={media.file_url} controls className=\"w-full max-w-md\" preload=\"metadata\">Browser tidak mendukung audio.</audio>\r\n          {media.caption && <p className=\"text-sm text-gray-600 mt-2 italic\">{media.caption}</p>}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <a href={media.file_url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"inline-flex items-center gap-2 text-sm bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\">\r\n          <Download className=\"w-4 h-4\" />\r\n          {mimeType === 'application/pdf' ? 'Buka PDF' : 'Download File'}\r\n        </a>\r\n        {media.caption && <p className=\"text-sm text-gray-600 mt-2 italic\">{media.caption}</p>}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const sortedPoins = [...poins].sort((a, b) => (a.order_index || 0) - (b.order_index || 0));\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200\">\r\n      <div className=\"p-6 border-b border-gray-200\">\r\n        <h2 className=\"text-xl font-bold text-gray-900\">Preview: {materialTitle}</h2>\r\n        <p className=\"text-sm text-gray-600 mt-1\">{poins.length} poin pembelajaran tersedia</p>\r\n      </div>\r\n\r\n      <div className=\"divide-y divide-gray-200\">\r\n        {sortedPoins.map((poin, index) => {\r\n          const media = getPoinMedia(poin);\r\n          const { processedHtml, hasMedia } = processContentWithMedia(poin.content_html, media);\r\n\r\n          return (\r\n            <div key={poin.id} className=\"p-6\">\r\n              <div className=\"mb-4\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900\">{index + 1}. {poin.title}</h3>\r\n                  {poin.duration_label && (<span className=\"text-xs text-blue-600 bg-blue-100 px-3 py-1 rounded-full font-medium\">{poin.duration_label}</span>)}\r\n                  {poin.duration_minutes && (<span className=\"text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full\">{poin.duration_minutes} menit</span>)}\r\n                  {hasMedia && (<span className=\"text-xs text-green-600 bg-green-100 px-3 py-1 rounded-full font-medium\"> {media.length} Media</span>)}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"prose prose-sm max-w-none text-gray-700\">\r\n                {/* Always show processed HTML if it has meaningful content, otherwise use fallback */}\r\n                {processedHtml && processedHtml !== poin.content_html ? (\r\n                  <div dangerouslySetInnerHTML={{ __html: processedHtml }} />\r\n                ) : (\r\n                  // Fallback: show original content + media inline (no separate section header)\r\n                  <>\r\n                    <div dangerouslySetInnerHTML={{ __html: poin.content_html || '<p>Konten kosong</p>' }} />\r\n                    {media.length > 0 && (\r\n                      <div className=\"space-y-4 mt-6\">\r\n                        {/* Sort media by created_at to maintain input order */}\r\n                        {[...media]\r\n                          .sort((a, b) => {\r\n                            if (a.created_at && b.created_at) {\r\n                              return new Date(a.created_at).getTime() - new Date(b.created_at).getTime();\r\n                            }\r\n                            return 0;\r\n                          })\r\n                          .map((mediaItem) => (\r\n                            <div key={mediaItem.id} className=\"my-4\">{renderMediaItem(mediaItem)}</div>\r\n                          ))}\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {poins.length === 0 && (\r\n        <div className=\"p-12 text-center text-gray-500\">\r\n          <FileText className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\r\n          <p className=\"text-lg font-medium\">Belum ada poin untuk ditampilkan</p>\r\n          <p className=\"text-sm\">Tambahkan poin di tab &quot;Kelola Poin&quot; terlebih dahulu</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1275, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus%20TUF%20Gaming/Documents/KULIAH/Pengabdian%20Website%20Posyandu/bukadita_backoffice/src/components/admin/shared/ModuleItemsPage.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState, useCallback } from \"react\";\r\nimport type React from \"react\";\r\nimport Swal from \"sweetalert2\";\r\nimport { RefreshCw, Plus, Edit, X } from \"lucide-react\";\r\nimport DataTable from \"./DataTable\";\r\nimport { adminMaterialsApi, type MaterialRecord, type MaterialsListResponse, adminModulesApi } from \"@/lib/api/admin\";\r\nimport { quizService, type QuizRecord } from \"@/lib/api/quiz\";\r\nimport { enhancedMaterialService, type PoinDetailRecord } from \"@/lib/api/poin-details\";\r\nimport MaterialPreview from \"../MaterialPreview\";\r\n\r\ntype ResourceType = \"materi\" | \"kuis\";\r\n\r\n// Interface untuk soal sementara (sebelum disimpan ke server)\r\ninterface TempQuestion {\r\n  id: string; // temporary ID\r\n  question_text: string;\r\n  options: string[];\r\n  correct_answer_index: number;\r\n  explanation?: string;\r\n}\r\n\r\nexport interface ModuleItemRow {\r\n  id: string;\r\n  title: string;\r\n  description?: string;\r\n  updated_at?: string;\r\n  published?: boolean;\r\n  contentLength?: number; // materi\r\n  pointsCount?: number; // materi - jumlah poin\r\n  questionCount?: number; // kuis\r\n  content?: string; // materi - untuk preview\r\n  poinDetails?: PoinDetailRecord[]; // materi - detail poin lengkap dengan media\r\n}\r\n\r\ninterface ModuleItemsPageProps {\r\n  moduleId: string;\r\n  resource: ResourceType;\r\n}\r\n\r\nconst STORAGE_PREFIX = \"admin_module_resource_\";\r\n\r\nexport default function ModuleItemsPage({ moduleId, resource }: ModuleItemsPageProps) {\r\n  const title = resource === \"materi\" ? \"Materi\" : \"Kuis\";\r\n  const searchPlaceholder = resource === \"materi\" ? \"Cari materi...\" : \"Cari kuis...\";\r\n  const storageKey = `${STORAGE_PREFIX}${resource}_${moduleId}`;\r\n\r\n  const [rows, setRows] = useState<ModuleItemRow[]>([]);\r\n  const [currentModuleName, setCurrentModuleName] = useState<string>(\"\");\r\n  const [showAdd, setShowAdd] = useState(false);\r\n  const [showEdit, setShowEdit] = useState(false);\r\n  const [editingItem, setEditingItem] = useState<ModuleItemRow | null>(null);\r\n\r\n  // State untuk sub-materi options (khusus kuis)\r\n  const [subMateriOptions, setSubMateriOptions] = useState<import(\"@/lib/api/quiz\").SubMateriOption[]>([]);\r\n\r\n  // State untuk quiz questions\r\n  const [questions, setQuestions] = useState<TempQuestion[]>([]);\r\n  const [showQuestionForm, setShowQuestionForm] = useState(false);\r\n  const [editingQuestionId, setEditingQuestionId] = useState<string | null>(null);\r\n  // Add form states\r\n  const [aTitle, setATitle] = useState(\"\");\r\n  const [aPublished, setAPublished] = useState(false);\r\n  const [aSlug, setASlug] = useState(\"\"); // materi optional\r\n  const [aContent, setAContent] = useState(\"\"); // materi\r\n  const [aDescription, setADescription] = useState(\"\"); // kuis\r\n  const [aSubMateriId, setASubMateriId] = useState(\"\"); // kuis sub materi\r\n  const [aTimeLimit, setATimeLimit] = useState<string>(\"30\"); // kuis time limit in minutes\r\n  const [aPassingScore, setAPassingScore] = useState<string>(\"70\"); // kuis passing score\r\n  const [aSubmitting, setASubmitting] = useState(false);\r\n\r\n  // Edit form states (separate from add form)\r\n  const [eTitle, setETitle] = useState(\"\");\r\n  const [ePublished, setEPublished] = useState(false);\r\n  const [eSlug, setESlug] = useState(\"\"); // materi optional\r\n  const [eContent, setEContent] = useState(\"\"); // materi\r\n  const [eDescription, setEDescription] = useState(\"\"); // kuis\r\n  const [eSubMateriId, setESubMateriId] = useState(\"\"); // kuis sub materi\r\n  const [eTimeLimit, setETimeLimit] = useState<string>(\"\"); // kuis time limit in seconds\r\n  const [ePassingScore, setEPassingScore] = useState<string>(\"\"); // kuis passing score\r\n  const [eSubmitting, setESubmitting] = useState(false);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n\r\n  // Preview modal states\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [previewItem, setPreviewItem] = useState<ModuleItemRow | null>(null);\r\n\r\n  // Filter states\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'published' | 'draft'>('all');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Load poin with complete media data (same as MaterialPoinManager)\r\n  const loadPoinWithMedia = async (poinId: string | number) => {\r\n    try {\r\n      const { apiFetch } = await import('@/lib/api/client');\r\n\r\n      const res = await apiFetch<PoinDetailRecord>(`/api/v1/admin/poins/${encodeURIComponent(String(poinId))}`, {\r\n        method: \"GET\"\r\n      });\r\n\r\n      if (res.ok) {\r\n        // Backend now includes media by default, but if not present, get from direct endpoint\r\n        if (!res.data.poin_media || res.data.poin_media.length === 0) {\r\n          try {\r\n            const { apiFetch: apiFetch2 } = await import('@/lib/api/client');\r\n            const mediaRes = await apiFetch2<import('@/lib/api/poin-details').MediaItem[]>(`/api/v1/admin/poins/${encodeURIComponent(String(poinId))}/media`, {\r\n              method: \"GET\"\r\n            });\r\n\r\n            if (mediaRes.ok && mediaRes.data) {\r\n              res.data.poin_media = mediaRes.data;\r\n            }\r\n          } catch (mediaError) {\r\n            console.warn('Error fetching media:', mediaError);\r\n          }\r\n        }\r\n\r\n        return res.data;\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error in loadPoinWithMedia:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // Fetch module name if not provided\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    const fetchModuleName = async () => {\r\n      if (!moduleId) return;\r\n\r\n      try {\r\n        const res = await adminModulesApi.list();\r\n        if (res.ok && res.data && !isCancelled) {\r\n          // Handle multiple possible response structures\r\n          let modulesList: { id: string | number; title: string }[] = [];\r\n          if (Array.isArray(res.data)) {\r\n            modulesList = res.data;\r\n          } else if (res.data.items && Array.isArray(res.data.items)) {\r\n            modulesList = res.data.items;\r\n          } else if (res.data.data && Array.isArray(res.data.data)) {\r\n            modulesList = res.data.data;\r\n          }\r\n\r\n          // Find the module with matching ID\r\n          const foundModule = modulesList.find((m) => String(m.id) === String(moduleId));\r\n          if (foundModule && foundModule.title && !isCancelled) {\r\n            setCurrentModuleName(foundModule.title);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        if (!isCancelled) {\r\n          console.error('Failed to fetch module name:', error);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchModuleName();\r\n\r\n    // Cleanup function to prevent setting state if component unmounts\r\n    return () => {\r\n      isCancelled = true;\r\n    };\r\n  }, [moduleId]);  // Helper to format server error from our apiFetch union result\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const formatServerError = (res: { ok: false; status: number; error: string; raw?: any }) => {\r\n    const j = res.raw && typeof res.raw === 'object' ? (res.raw as Record<string, unknown>) : undefined;\r\n    const code = typeof j?.code === 'string' ? j?.code : undefined;\r\n    const message = (typeof j?.message === 'string' && j?.message) || res.error;\r\n    const details = typeof j?.details === 'string' ? j?.details : undefined;\r\n    const head = code ? `[${code}] ${message}` : message;\r\n    return details ? `${head}\\nDetail: ${details}` : head;\r\n  };\r\n\r\n  // Helper function to refetch materials list\r\n  const refetchMaterialsList = useCallback(async (bypassCache = false) => {\r\n    const params = {\r\n      module_id: moduleId,\r\n      include_drafts: true, // Admin can see draft materials\r\n      include_poins: true,  // Include poin details for count and preview\r\n      ...(bypassCache && { _t: Date.now() })\r\n    };\r\n\r\n    const res = await adminMaterialsApi.list(params);\r\n\r\n    if (res.ok) {\r\n      const data = res.data as MaterialsListResponse;\r\n\r\n      // Handle multiple possible response structures\r\n      let arr: MaterialRecord[] = [];\r\n      if (Array.isArray(data)) {\r\n        arr = data as MaterialRecord[];\r\n      } else if (Array.isArray(data.items)) {\r\n        arr = data.items;\r\n      } else if (Array.isArray(data.data)) {\r\n        arr = data.data;\r\n      } else if (data && typeof data === 'object' && 'length' in data) {\r\n        arr = Array.from(data as ArrayLike<MaterialRecord>);\r\n      }\r\n\r\n      const mapped: ModuleItemRow[] = await Promise.all(\r\n        arr.map(async (m) => {\r\n          // Fetch poin details for count only (media will be loaded on demand for preview)\r\n          let poinDetails: PoinDetailRecord[] = [];\r\n          try {\r\n            const poinRes = await enhancedMaterialService.getWithPoins(m.id);\r\n            if (poinRes.ok && poinRes.data.poin_details) {\r\n              poinDetails = poinRes.data.poin_details;\r\n            }\r\n          } catch (error) {\r\n            console.warn(`Failed to fetch poins for material ${m.id}:`, error);\r\n          }\r\n\r\n          return {\r\n            id: String(m.id),\r\n            title: m.title,\r\n            description: undefined, // Remove content description from table\r\n            updated_at: m.updated_at || m.created_at,\r\n            published: !!m.published,\r\n            contentLength: typeof m.content === 'string' ? m.content.length : 0,\r\n            pointsCount: poinDetails.length,\r\n            content: typeof m.content === 'string' ? m.content : undefined,\r\n            poinDetails: poinDetails,\r\n          };\r\n        })\r\n      ); setRows(mapped);\r\n      try { localStorage.setItem(storageKey, JSON.stringify(mapped)); } catch { }\r\n      return true;\r\n    } else {\r\n      console.error('Failed to refetch materials:', res.error);\r\n      return false;\r\n    }\r\n  }, [moduleId, storageKey]);\r\n\r\n  // Helper function to refetch quiz list\r\n  const refetchQuizList = useCallback(async (bypassCache = false) => {\r\n    // Call quiz API directly according to backend API documentation\r\n    const quizRes = await quizService.list({\r\n      // Add cache busting if needed (API doesn't need this param but TypeScript requires valid params)\r\n      ...(bypassCache && { limit: 1000 })\r\n    });\r\n\r\n    if (!quizRes.ok) {\r\n      console.error('Failed to get quiz list:', quizRes.error);\r\n      setRows([]);\r\n      return false;\r\n    }\r\n\r\n    // Parse quiz response according to backend API documentation\r\n    const responseData = quizRes.data;\r\n    let allQuizzes: QuizRecord[] = [];\r\n\r\n    // According to API documentation, response should be:\r\n    // { \"success\": true, \"data\": { \"quizzes\": [...], \"pagination\": {...} } }\r\n    const dataWithQuizzes = responseData as unknown as { quizzes?: QuizRecord[]; items?: QuizRecord[];[key: string]: unknown };\r\n\r\n    if (dataWithQuizzes.quizzes && Array.isArray(dataWithQuizzes.quizzes)) {\r\n      // Backend API format: { data: { quizzes: [...] } }\r\n      allQuizzes = dataWithQuizzes.quizzes;\r\n    } else if (dataWithQuizzes.items && Array.isArray(dataWithQuizzes.items)) {\r\n      // Fallback format: { items: [...] }\r\n      allQuizzes = dataWithQuizzes.items;\r\n    } else if (Array.isArray(responseData)) {\r\n      // Direct array format\r\n      allQuizzes = responseData;\r\n    } else {\r\n      console.error('Unexpected API response structure:', Object.keys(dataWithQuizzes));\r\n      setRows([]);\r\n      return false;\r\n    }\r\n\r\n    // Filter quizzes by module - get materials in this module first\r\n    const materialsRes = await adminMaterialsApi.list({\r\n      module_id: moduleId,\r\n      include_drafts: true,\r\n      limit: 100,\r\n      ...(bypassCache && { _t: Date.now() })\r\n    });\r\n\r\n    let materialIds: Set<string | number> = new Set();\r\n\r\n    if (materialsRes.ok && materialsRes.data.items) {\r\n      const materials = materialsRes.data.items;\r\n      materialIds = new Set(materials.map(m => String(m.id)));\r\n    } else {\r\n      console.warn('Could not get materials for module filtering');\r\n      // If we can't get materials, include all quizzes (fallback)\r\n    }\r\n\r\n    // Filter quizzes that belong to materials in this module\r\n    const moduleQuizzes = allQuizzes.filter(quiz => {\r\n      return materialIds.size === 0 || materialIds.has(String(quiz.sub_materi_id));\r\n    });\r\n\r\n    // Map quiz data to UI rows - fetch question count for each quiz\r\n    const mapped: ModuleItemRow[] = await Promise.all(\r\n      moduleQuizzes.map(async (quiz) => {\r\n        let questionCount = 0;\r\n\r\n        // Get question count - check if already included in response\r\n        if (quiz.questions && Array.isArray(quiz.questions)) {\r\n          questionCount = quiz.questions.length;\r\n        } else {\r\n          // Fetch quiz details to get question count\r\n          try {\r\n            const detailRes = await quizService.get(quiz.id);\r\n            if (detailRes.ok && detailRes.data.questions) {\r\n              questionCount = detailRes.data.questions.length;\r\n            }\r\n          } catch (error) {\r\n            console.warn(`Failed to fetch question count for quiz ${quiz.id}:`, error);\r\n          }\r\n        }\r\n\r\n        // Handle published field mapping - Backend uses 'is_active' instead of 'published'\r\n        let publishedStatus = false;\r\n\r\n        if (quiz.published !== undefined) {\r\n          // Preferred field name per API documentation\r\n          publishedStatus = quiz.published;\r\n        } else {\r\n          // Backend actually uses 'is_active' field - map it to published\r\n          const quizWithExtraFields = quiz as unknown as { is_active?: boolean };\r\n          if (quizWithExtraFields.is_active !== undefined) {\r\n            publishedStatus = quizWithExtraFields.is_active;\r\n          }\r\n        }\r\n\r\n        return {\r\n          id: String(quiz.id),\r\n          title: quiz.title,\r\n          description: quiz.description?.slice(0, 140),\r\n          updated_at: quiz.updated_at || quiz.created_at,\r\n          published: publishedStatus,\r\n          questionCount: questionCount,\r\n        };\r\n      })\r\n    );\r\n\r\n    setRows(mapped);\r\n\r\n    // Clear local storage cache if bypassCache is true\r\n    if (bypassCache) {\r\n      try { localStorage.removeItem(storageKey); } catch { }\r\n    }\r\n\r\n    try { localStorage.setItem(storageKey, JSON.stringify(mapped)); } catch { }\r\n    return true;\r\n  }, [moduleId, storageKey]);\r\n\r\n  // Load sub-materi options for quiz dropdown - get materials from current module\r\n  useEffect(() => {\r\n    if (resource === \"kuis\") {\r\n      const loadSubMateriOptions = async () => {\r\n        try {\r\n          // Get materials from the current module to use as sub-materi options\r\n          const res = await adminMaterialsApi.list({\r\n            module_id: moduleId,\r\n            include_drafts: true, // Get both published and unpublished\r\n            limit: 100 // Get all materials in module\r\n          });\r\n\r\n          if (res.ok && res.data.items) {\r\n            // Transform material data to match SubMateriOption interface\r\n            const options = res.data.items.map((material: MaterialRecord) => ({\r\n              id: material.id,\r\n              title: material.title,\r\n              module_title: currentModuleName || `Module ${moduleId}`,\r\n              display_title: `${currentModuleName || `Module ${moduleId}`} - ${material.title}`\r\n            }));\r\n            setSubMateriOptions(options);\r\n          } else {\r\n            console.warn('Failed to load materials for module:', res);\r\n            setSubMateriOptions([]);\r\n          }\r\n        } catch (error) {\r\n          console.error('Failed to load sub-materi options:', error);\r\n          setSubMateriOptions([]); // Set empty array on error\r\n        }\r\n      };\r\n      loadSubMateriOptions();\r\n    }\r\n  }, [resource, moduleId, currentModuleName]);\r\n\r\n  // Load data from backend for both materi and kuis\r\n  useEffect(() => {\r\n    const load = async () => {\r\n      try {\r\n        if (resource === \"materi\") {\r\n          // Get materials list first (without poin details to avoid backend dependency)\r\n          const res = await adminMaterialsApi.list({\r\n            module_id: moduleId,\r\n            include_drafts: true // Admin can see draft materials\r\n          });\r\n\r\n          if (res.ok) {\r\n            const data = res.data as MaterialsListResponse;\r\n\r\n            // Handle multiple possible response structures\r\n            let arr: MaterialRecord[] = [];\r\n            if (Array.isArray(data)) {\r\n              arr = data as MaterialRecord[];\r\n            } else if (Array.isArray(data.items)) {\r\n              arr = data.items;\r\n            } else if (Array.isArray(data.data)) {\r\n              arr = data.data;\r\n            } else if (data && typeof data === 'object' && 'length' in data) {\r\n              arr = Array.from(data as ArrayLike<MaterialRecord>);\r\n            }\r\n\r\n            // Fetch poin details for each material (without media for faster initial load)\r\n            const mapped: ModuleItemRow[] = await Promise.all(\r\n              arr.map(async (m) => {\r\n                // Only fetch poin details for count, don't load media yet for faster initial load\r\n                let poinDetails: PoinDetailRecord[] = [];\r\n                try {\r\n                  const poinRes = await enhancedMaterialService.getWithPoins(m.id);\r\n                  if (poinRes.ok && poinRes.data.poin_details) {\r\n                    poinDetails = poinRes.data.poin_details;\r\n                  }\r\n                } catch (error) {\r\n                  console.warn(`Failed to fetch poins for material ${m.id}:`, error);\r\n                }\r\n\r\n                return {\r\n                  id: String(m.id),\r\n                  title: m.title,\r\n                  description: undefined, // Remove content description from table\r\n                  updated_at: m.updated_at || m.created_at,\r\n                  published: !!m.published,\r\n                  contentLength: typeof m.content === 'string' ? m.content.length : 0,\r\n                  pointsCount: poinDetails.length,\r\n                  content: typeof m.content === 'string' ? m.content : undefined,\r\n                  poinDetails: poinDetails,\r\n                };\r\n              })\r\n            );\r\n\r\n            setRows(mapped);\r\n            try { localStorage.setItem(storageKey, JSON.stringify(mapped)); } catch { }\r\n            return;\r\n          } else {\r\n            console.error('Failed to load materials:', res.error);\r\n            // Show user-friendly error message\r\n            await Swal.fire({\r\n              icon: 'error',\r\n              title: 'Gagal Memuat Materi',\r\n              text: `Tidak dapat memuat materi: ${res.error || 'Terjadi kesalahan pada server'}`,\r\n              footer: 'Silakan coba refresh halaman atau hubungi administrator jika masalah berlanjut'\r\n            });\r\n          }\r\n        } else if (resource === \"kuis\") {\r\n          // Use the same logic as refetchQuizList to ensure consistency\r\n          const result = await refetchQuizList(false);\r\n          if (result) {\r\n            return; // Data already set by refetchQuizList\r\n          } else {\r\n            await Swal.fire({\r\n              icon: 'error',\r\n              title: 'Gagal Memuat Kuis',\r\n              text: 'Tidak dapat memuat kuis untuk modul ini',\r\n              footer: 'Silakan coba refresh halaman atau hubungi administrator jika masalah berlanjut'\r\n            });\r\n          }\r\n        }\r\n\r\n        // Fallback to local storage\r\n        try {\r\n          const raw = localStorage.getItem(storageKey);\r\n          if (raw) {\r\n            setRows(JSON.parse(raw));\r\n            return;\r\n          }\r\n        } catch { }\r\n\r\n        // If no data available, set empty\r\n        setRows([]);\r\n      } catch (error) {\r\n        console.error(`Error loading ${resource} data:`, error);\r\n        await Swal.fire({\r\n          icon: 'error',\r\n          title: 'Kesalahan Sistem',\r\n          text: `Terjadi kesalahan saat memuat ${resource}: ${error instanceof Error ? error.message : 'Kesalahan tidak diketahui'}`,\r\n          footer: 'Silakan refresh halaman atau hubungi administrator'\r\n        });\r\n        setRows([]); // Set empty array as fallback\r\n      }\r\n    };\r\n    load();\r\n  }, [moduleId, resource, storageKey, refetchQuizList]);\r\n\r\n  // Persist to localStorage on change\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem(storageKey, JSON.stringify(rows));\r\n    } catch {\r\n      // ignore\r\n    }\r\n  }, [rows, storageKey]);\r\n\r\n  // Filter data based on status and search term\r\n  const filteredRows = useMemo(() => {\r\n    let filtered = rows;\r\n\r\n    // Apply status filter\r\n    if (statusFilter === 'published') {\r\n      filtered = filtered.filter(row => row.published === true);\r\n    } else if (statusFilter === 'draft') {\r\n      filtered = filtered.filter(row => row.published !== true);\r\n    }\r\n\r\n    // Apply search filter\r\n    if (searchTerm.trim()) {\r\n      const term = searchTerm.toLowerCase().trim();\r\n      filtered = filtered.filter(row =>\r\n        row.title.toLowerCase().includes(term) ||\r\n        (row.description && row.description.toLowerCase().includes(term))\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  }, [rows, statusFilter, searchTerm]);\r\n\r\n\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  type ColumnDef = { key: string; label: string; render?: (value: any, row: ModuleItemRow) => React.ReactNode };\r\n  const columns: ColumnDef[] = useMemo(() => {\r\n    return [\r\n      {\r\n        key: \"title\",\r\n        label: title,\r\n        render: (_: unknown, row: ModuleItemRow) => (\r\n          <div>\r\n            {resource === \"kuis\" ? (\r\n              <p className=\"font-semibold text-xl\">\r\n                {row.title}\r\n              </p>\r\n            ) : (\r\n              <div className=\"font-medium text-gray-900\">\r\n                {row.title}\r\n              </div>\r\n            )}\r\n            {row.description && (\r\n              <div className=\"text-sm text-gray-500 truncate max-w-[360px]\">{row.description}</div>\r\n            )}\r\n          </div>\r\n        )\r\n      },\r\n      {\r\n        key: resource === \"materi\" ? \"pointsCount\" : \"questionCount\",\r\n        label: resource === \"materi\" ? \"Jumlah Poin Materi\" : \"Jumlah Soal\",\r\n        render: (val: number | undefined) => (\r\n          <span className=\"text-sm text-gray-700\">{val ?? 0} {resource === \"materi\" ? \"poin materi\" : \"soal\"}</span>\r\n        )\r\n      },\r\n      {\r\n        key: \"published\",\r\n        label: \"Status\",\r\n        render: (v: boolean | undefined) => (\r\n          <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${v ? \"bg-green-100 text-green-700\" : \"bg-gray-200 text-gray-700\"}`}>\r\n            {v ? \"Terbit\" : \"Draf\"}\r\n          </span>\r\n        )\r\n      },\r\n      {\r\n        key: \"updated_at\",\r\n        label: \"Diubah\",\r\n        render: (val?: string) => (\r\n          <span className=\"text-sm text-gray-700\">{val ? new Date(val).toLocaleString(\"id-ID\") : \"-\"}</span>\r\n        )\r\n      }\r\n    ];\r\n  }, [resource, title]);\r\n\r\n  const onAdd = () => setShowAdd((v) => !v);\r\n\r\n  // Function to handle \"Tambah Poin\" action for materi and \"Tambah Soal\" for kuis\r\n  const onTambahPoin = (row: ModuleItemRow) => {\r\n    if (resource === \"materi\") {\r\n      if (!row.id) {\r\n        console.error('Row ID is missing:', row);\r\n        Swal.fire({\r\n          icon: 'error',\r\n          title: 'Error',\r\n          text: 'ID materi tidak ditemukan. Silakan refresh halaman dan coba lagi.'\r\n        });\r\n        return;\r\n      }\r\n      // Use nested structure: /admin/modul/[id]/materi/[materialId]/poin\r\n      window.location.href = `/admin/modul/${moduleId}/materi/${row.id}/poin`;\r\n    } else if (resource === \"kuis\") {\r\n      if (!row.id) {\r\n        console.error('Row ID is missing:', row);\r\n        Swal.fire({\r\n          icon: 'error',\r\n          title: 'Error',\r\n          text: 'ID kuis tidak ditemukan. Silakan refresh halaman dan coba lagi.'\r\n        });\r\n        return;\r\n      }\r\n      // Use nested structure: /admin/modul/[id]/kuis/[kuisId]/soal\r\n      window.location.href = `/admin/modul/${moduleId}/kuis/${row.id}/soal`;\r\n    }\r\n  };\r\n\r\n  // Function to handle \"Preview\" action for materi\r\n  const onPreview = async (row: ModuleItemRow) => {\r\n    if (resource === \"materi\") {\r\n      // Check if we already have poin details with media in the row\r\n      if (row.poinDetails && row.poinDetails.length > 0) {\r\n        // Check if any poin has media data already loaded\r\n        const hasMediaLoaded = row.poinDetails.some(poin => poin.poin_media && poin.poin_media.length > 0);\r\n\r\n        if (hasMediaLoaded) {\r\n          setPreviewItem(row);\r\n          setShowPreview(true);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Only fetch if we don't have complete data\r\n      try {\r\n        const poinRes = await enhancedMaterialService.getWithPoins(row.id);\r\n        if (poinRes.ok && poinRes.data.poin_details) {\r\n          // Only load media for poins that don't have it yet\r\n          const poinsWithMedia = await Promise.all(\r\n            poinRes.data.poin_details.map(async (poin) => {\r\n              // Check if this poin already has media\r\n              if (poin.poin_media && poin.poin_media.length > 0) {\r\n                return poin;\r\n              }\r\n\r\n              const poinWithMedia = await loadPoinWithMedia(poin.id);\r\n              if (poinWithMedia) {\r\n                return poinWithMedia;\r\n              }\r\n              return poin;\r\n            })\r\n          );\r\n\r\n          const updatedRow = {\r\n            ...row,\r\n            poinDetails: poinsWithMedia\r\n          };\r\n          setPreviewItem(updatedRow);\r\n          setShowPreview(true);\r\n        } else {\r\n          // Show preview even if no poin details\r\n          setPreviewItem(row);\r\n          setShowPreview(true);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading preview data:', error);\r\n        // Fallback to current data\r\n        setPreviewItem(row);\r\n        setShowPreview(true);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Helper functions untuk quiz questions\r\n  const resetQuizForm = () => {\r\n    setATitle(\"\");\r\n    setADescription(\"\");\r\n    setASubMateriId(\"\");\r\n    setATimeLimit(\"30\");\r\n    setAPassingScore(\"70\");\r\n    setAPublished(false);\r\n    setQuestions([]);\r\n    setShowQuestionForm(false);\r\n    setEditingQuestionId(null);\r\n  };\r\n\r\n  const addNewQuestion = () => {\r\n    const newQuestion: TempQuestion = {\r\n      id: `temp_${Date.now()}`,\r\n      question_text: \"\",\r\n      options: [\"\", \"\", \"\", \"\"],\r\n      correct_answer_index: 0,\r\n      explanation: \"\"\r\n    };\r\n    setQuestions([...questions, newQuestion]);\r\n    setShowQuestionForm(true);\r\n    setEditingQuestionId(newQuestion.id);\r\n  };\r\n\r\n  const updateQuestion = (questionId: string, updates: Partial<TempQuestion>) => {\r\n    setQuestions(questions.map(q =>\r\n      q.id === questionId ? { ...q, ...updates } : q\r\n    ));\r\n  };\r\n\r\n  const deleteQuestion = async (questionId: string) => {\r\n    const result = await Swal.fire({\r\n      title: 'Hapus Soal?',\r\n      text: 'Soal ini akan dihapus dari daftar.',\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Hapus',\r\n      cancelButtonText: 'Batal'\r\n    });\r\n\r\n    if (result.isConfirmed) {\r\n      setQuestions(questions.filter(q => q.id !== questionId));\r\n      if (editingQuestionId === questionId) {\r\n        setEditingQuestionId(null);\r\n        setShowQuestionForm(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const editQuestion = (questionId: string) => {\r\n    setEditingQuestionId(questionId);\r\n    setShowQuestionForm(true);\r\n  };\r\n\r\n  const onManualRefresh = useCallback(async () => {\r\n    setIsRefreshing(true);\r\n    try {\r\n      if (resource === 'materi') {\r\n        await refetchMaterialsList(true);\r\n      } else {\r\n        await refetchQuizList(true);\r\n      }\r\n      await Swal.fire({\r\n        icon: 'success',\r\n        title: 'Data diperbarui',\r\n        timer: 1000,\r\n        showConfirmButton: false\r\n      });\r\n    } catch (error) {\r\n      console.error('Manual refresh failed:', error);\r\n      await Swal.fire({\r\n        icon: 'error',\r\n        title: 'Gagal memperbarui',\r\n        text: 'Terjadi kesalahan saat memperbarui data'\r\n      });\r\n    } finally {\r\n      setIsRefreshing(false);\r\n    }\r\n  }, [resource, refetchMaterialsList, refetchQuizList]);\r\n\r\n\r\n\r\n  const submitAdd = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    const titleVal = aTitle.trim();\r\n    if (!titleVal || titleVal.length < 3) {\r\n      await Swal.fire({ icon: 'warning', title: 'Judul minimal 3 karakter' });\r\n      return;\r\n    }\r\n\r\n    if (resource === 'materi') {\r\n      const contentVal = aContent.trim();\r\n      if (!contentVal || contentVal.length < 10) {\r\n        await Swal.fire({ icon: 'warning', title: 'Konten minimal 10 karakter' });\r\n        return;\r\n      }\r\n      setASubmitting(true);\r\n\r\n      const res = await adminMaterialsApi.createNested(moduleId, {\r\n        title: titleVal,\r\n        content: contentVal,\r\n        published: aPublished,\r\n        slug: aSlug ? aSlug.trim() : undefined,\r\n      });\r\n\r\n      setASubmitting(false);\r\n\r\n      if (!res.ok) {\r\n        await Swal.fire({ icon: 'error', title: 'Gagal', text: formatServerError(res as unknown as { ok: false; status: number; error: string; raw?: unknown }) || 'Gagal membuat materi' });\r\n        return;\r\n      }\r\n\r\n      // Force refetch all materials to ensure UI shows complete list\r\n      await refetchMaterialsList();\r\n\r\n      await Swal.fire({ icon: 'success', title: 'Berhasil', timer: 900, showConfirmButton: false });\r\n      // reset & close\r\n      setATitle(\"\"); setAContent(\"\"); setASlug(\"\"); setAPublished(false); setShowAdd(false);\r\n      return;\r\n    }\r\n\r\n    // Kuis: create via backend API\r\n    if (resource === 'kuis') {\r\n      if (!aSubMateriId) {\r\n        await Swal.fire({\r\n          icon: 'warning',\r\n          title: 'Peringatan',\r\n          text: 'Sub materi harus dipilih'\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Validasi soal jika ada\r\n      if (questions.length > 0) {\r\n        for (let i = 0; i < questions.length; i++) {\r\n          const q = questions[i];\r\n          if (!q.question_text.trim()) {\r\n            await Swal.fire({\r\n              icon: 'warning',\r\n              title: 'Peringatan',\r\n              text: `Soal ${i + 1}: Pertanyaan harus diisi`\r\n            });\r\n            return;\r\n          }\r\n          const validOptions = q.options.filter(opt => opt.trim());\r\n          if (validOptions.length < 2) {\r\n            await Swal.fire({\r\n              icon: 'warning',\r\n              title: 'Peringatan',\r\n              text: `Soal ${i + 1}: Minimal harus ada 2 opsi jawaban`\r\n            });\r\n            return;\r\n          }\r\n        }\r\n      }\r\n\r\n      const timeLimitSeconds = parseInt(aTimeLimit) * 60; // convert minutes to seconds\r\n      const passingScoreNum = parseInt(aPassingScore);\r\n\r\n      if (passingScoreNum < 0 || passingScoreNum > 100) {\r\n        await Swal.fire({\r\n          icon: 'warning',\r\n          title: 'Peringatan',\r\n          text: 'Nilai kelulusan harus antara 0-100'\r\n        });\r\n        return;\r\n      }\r\n\r\n      setASubmitting(true);\r\n      try {\r\n        // 1. Buat kuis terlebih dahulu\r\n        const payload = {\r\n          sub_materi_id: aSubMateriId,\r\n          title: titleVal,\r\n          description: aDescription || undefined,\r\n          time_limit_seconds: timeLimitSeconds,\r\n          passing_score: passingScoreNum,\r\n          published: aPublished\r\n        };\r\n\r\n        const res = await quizService.create(payload);\r\n\r\n        if (!res.ok) {\r\n          await Swal.fire({\r\n            icon: 'error',\r\n            title: 'Gagal',\r\n            text: formatServerError(res as unknown as { ok: false; status: number; error: string; raw?: unknown }) || 'Gagal membuat kuis'\r\n          });\r\n          return;\r\n        }\r\n\r\n        // 2. Tambahkan soal-soal jika ada\r\n        if (questions.length > 0) {\r\n          for (let i = 0; i < questions.length; i++) {\r\n            const q = questions[i];\r\n            const validOptions = q.options.filter(opt => opt.trim());\r\n\r\n            await quizService.addQuestion(res.data.id, {\r\n              question_text: q.question_text.trim(),\r\n              options: validOptions,\r\n              correct_answer_index: Math.min(q.correct_answer_index, validOptions.length - 1),\r\n              explanation: q.explanation?.trim() || undefined,\r\n              order_index: i + 1\r\n            });\r\n          }\r\n        }\r\n\r\n        // 3. Reset form dan refresh data\r\n        resetQuizForm();\r\n        setShowAdd(false);\r\n        await refetchQuizList();\r\n\r\n        const message = questions.length > 0\r\n          ? `Kuis berhasil dibuat dengan ${questions.length} soal`\r\n          : 'Kuis berhasil dibuat';\r\n\r\n        await Swal.fire({\r\n          icon: 'success',\r\n          title: 'Berhasil',\r\n          text: message,\r\n          timer: 2000,\r\n          showConfirmButton: false\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error creating quiz:', error);\r\n        await Swal.fire({\r\n          icon: 'error',\r\n          title: 'Error',\r\n          text: 'Terjadi kesalahan saat membuat kuis'\r\n        });\r\n      } finally {\r\n        setASubmitting(false);\r\n      }\r\n      return;\r\n    }\r\n  };\r\n\r\n  const onEdit = async (row: ModuleItemRow) => {\r\n    setEditingItem(row);\r\n    // Populate edit form dengan data existing (menggunakan state edit terpisah)\r\n    setETitle(row.title);\r\n    setEPublished(row.published || false);\r\n    if (resource === 'materi') {\r\n      setEContent(row.content || '');\r\n      setESlug(''); // slug tidak disimpan di row, biarkan kosong\r\n    } else {\r\n      setEDescription(row.description || '');\r\n      setETimeLimit('');\r\n      setEPassingScore('');\r\n      setESubMateriId('');\r\n\r\n      // Fetch quiz details to get current sub_materi_id, time_limit, and passing_score\r\n      try {\r\n        const quizDetailsRes = await quizService.get(row.id);\r\n        if (quizDetailsRes.ok) {\r\n          const quiz = quizDetailsRes.data;\r\n          setESubMateriId(String(quiz.sub_materi_id || ''));\r\n          setETimeLimit(String(quiz.time_limit_seconds ? Math.floor(quiz.time_limit_seconds / 60) : '')); // convert seconds to minutes\r\n          setEPassingScore(String(quiz.passing_score || ''));\r\n        }\r\n      } catch (error) {\r\n        console.warn('Failed to fetch quiz details for editing:', error);\r\n      }\r\n    }\r\n    setShowEdit(true);\r\n  };\r\n\r\n  const submitEdit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!editingItem) return;\r\n\r\n    const titleVal = eTitle.trim();\r\n    if (!titleVal || titleVal.length < 3) {\r\n      await Swal.fire({ icon: 'warning', title: 'Judul minimal 3 karakter' });\r\n      return;\r\n    }\r\n\r\n    if (resource === 'materi') {\r\n      const contentVal = eContent.trim();\r\n      if (!contentVal || contentVal.length < 10) {\r\n        await Swal.fire({ icon: 'warning', title: 'Konten minimal 10 karakter' });\r\n        return;\r\n      }\r\n\r\n      setESubmitting(true);\r\n      const payload = {\r\n        title: titleVal,\r\n        content: contentVal,\r\n        published: ePublished,\r\n        slug: eSlug ? eSlug.trim() : undefined,\r\n      };\r\n\r\n      const res = await adminMaterialsApi.update(editingItem.id, payload);\r\n      setESubmitting(false);\r\n\r\n      if (!res.ok) {\r\n        await Swal.fire({ icon: 'error', title: 'Gagal', text: formatServerError(res as unknown as { ok: false; status: number; error: string; raw?: unknown }) || 'Gagal memperbarui materi' });\r\n        return;\r\n      }\r\n\r\n      // Force refetch to ensure UI is up to date\r\n      await refetchMaterialsList();\r\n      await Swal.fire({ icon: 'success', title: 'Tersimpan', timer: 900, showConfirmButton: false });\r\n\r\n      // Reset edit form and close\r\n      setETitle(''); setEContent(''); setESlug(''); setEPublished(false);\r\n      setShowEdit(false); setEditingItem(null);\r\n      return;\r\n    }\r\n\r\n    // Kuis: validate required fields\r\n    if (!eSubMateriId) {\r\n      await Swal.fire({\r\n        icon: 'warning',\r\n        title: 'Peringatan',\r\n        text: 'Sub materi harus dipilih'\r\n      });\r\n      return;\r\n    }\r\n\r\n    const timeLimitMinutes = parseInt(eTimeLimit);\r\n    const passingScoreNum = parseInt(ePassingScore);\r\n\r\n    if (eTimeLimit && (isNaN(timeLimitMinutes) || timeLimitMinutes < 1)) {\r\n      await Swal.fire({\r\n        icon: 'warning',\r\n        title: 'Peringatan',\r\n        text: 'Batas waktu harus berupa angka positif (dalam menit)'\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (ePassingScore && (isNaN(passingScoreNum) || passingScoreNum < 0 || passingScoreNum > 100)) {\r\n      await Swal.fire({\r\n        icon: 'warning',\r\n        title: 'Peringatan',\r\n        text: 'Nilai kelulusan harus antara 0-100'\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Kuis: update via backend API\r\n    setESubmitting(true);\r\n    const payload = {\r\n      sub_materi_id: eSubMateriId,\r\n      title: titleVal,\r\n      description: eDescription || undefined,\r\n      time_limit_seconds: eTimeLimit ? timeLimitMinutes * 60 : undefined, // convert minutes to seconds\r\n      passing_score: ePassingScore ? passingScoreNum : undefined,\r\n      published: ePublished,\r\n    };\r\n\r\n    const res = await quizService.update(editingItem.id, payload);\r\n    setESubmitting(false);\r\n\r\n    if (!res.ok) {\r\n      await Swal.fire({ icon: 'error', title: 'Gagal', text: formatServerError(res as unknown as { ok: false; status: number; error: string; raw?: unknown }) || 'Gagal memperbarui kuis' });\r\n      return;\r\n    }\r\n\r\n    // Small delay to ensure database commit is complete\r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n\r\n    // Force refetch to ensure UI is up to date with fresh data\r\n    await refetchQuizList(true); // bypassCache=true untuk memastikan data terbaru\r\n    await Swal.fire({ icon: 'success', title: 'Tersimpan', timer: 900, showConfirmButton: false });\r\n\r\n    // Reset edit form and close\r\n    setETitle(''); setEDescription(''); setESubMateriId(''); setETimeLimit(''); setEPassingScore(''); setEPublished(false);\r\n    setShowEdit(false); setEditingItem(null);\r\n  };\r\n\r\n  const onDelete = async (row: ModuleItemRow) => {\r\n    const result = await Swal.fire({\r\n      title: `Hapus ${title}?`,\r\n      text: `Item \\\"${row.title}\\\" akan dihapus.`,\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Hapus',\r\n      cancelButtonText: 'Batal',\r\n      reverseButtons: true\r\n    });\r\n    if (!result.isConfirmed) return;\r\n\r\n    if (resource === 'materi') {\r\n      const res = await adminMaterialsApi.remove(row.id);\r\n      if (!res.ok) {\r\n        await Swal.fire({ icon: 'error', title: 'Gagal', text: formatServerError(res as unknown as { ok: false; status: number; error: string; raw?: unknown }) || 'Gagal menghapus materi' });\r\n        return;\r\n      }\r\n      // Force refetch to ensure UI is accurate\r\n      await refetchMaterialsList();\r\n      // Show success message\r\n      await Swal.fire({\r\n        icon: 'success',\r\n        title: 'Berhasil Dihapus',\r\n        text: `Materi \"${row.title}\" berhasil dihapus.`,\r\n        timer: 2000,\r\n        showConfirmButton: false\r\n      });\r\n    } else if (resource === 'kuis') {\r\n      const res = await quizService.remove(row.id);\r\n      if (!res.ok) {\r\n        await Swal.fire({ icon: 'error', title: 'Gagal', text: formatServerError(res as unknown as { ok: false; status: number; error: string; raw?: unknown }) || 'Gagal menghapus kuis' });\r\n        return;\r\n      }\r\n      // Force refetch to ensure UI is accurate\r\n      await refetchQuizList();\r\n      // Show success message\r\n      await Swal.fire({\r\n        icon: 'success',\r\n        title: 'Berhasil Dihapus',\r\n        text: `Kuis \"${row.title}\" berhasil dihapus.`,\r\n        timer: 2000,\r\n        showConfirmButton: false\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-gray-50 min-h-screen text-black\">\r\n      {/* Add form section */}\r\n      {showAdd && (\r\n        <form onSubmit={submitAdd} className=\"bg-white rounded-xl p-5 shadow-sm border border-gray-200 mb-6\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Tambah {title} Baru</h2>\r\n          {resource === 'materi' ? (\r\n            <div className=\"grid grid-cols-1 gap-4\">\r\n              <div>\r\n                <label className=\"text-sm text-gray-600\">Judul *</label>\r\n                <input value={aTitle} onChange={(e) => setATitle(e.target.value)} className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" placeholder=\"Judul minimal 3 karakter\" required minLength={3} />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-sm text-gray-600\">Konten *</label>\r\n                <textarea value={aContent} onChange={(e) => setAContent(e.target.value)} className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 min-h-32\" placeholder=\"Konten minimal 10 karakter\" required />\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <input id=\"a-published\" type=\"checkbox\" checked={aPublished} onChange={(e) => setAPublished(e.target.checked)} className=\"w-4 h-4\" />\r\n                <label htmlFor=\"a-published\" className=\"text-sm text-gray-700\">\r\n                  Terbitkan\r\n                </label>\r\n              </div>\r\n              <div>\r\n                <button type=\"submit\" disabled={aSubmitting} className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white shadow disabled:opacity-60\">\r\n                  {aSubmitting ? 'Menyimpan...' : 'Simpan'}\r\n                </button>\r\n                <button type=\"button\" onClick={() => setShowAdd(false)} className=\"ml-2 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 shadow\">\r\n                  Batal\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              {/* Basic Quiz Info */}\r\n              <div className=\"grid grid-cols-1 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Judul Kuis *</label>\r\n                  <input\r\n                    value={aTitle}\r\n                    onChange={(e) => setATitle(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"Masukkan judul kuis\"\r\n                    required\r\n                    minLength={3}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Deskripsi</label>\r\n                  <textarea\r\n                    value={aDescription}\r\n                    onChange={(e) => setADescription(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-none\"\r\n                    placeholder=\"Deskripsi singkat kuis (opsional)\"\r\n                    rows={2}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Sub Materi *</label>\r\n                  <select\r\n                    value={aSubMateriId}\r\n                    onChange={(e) => setASubMateriId(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                    required\r\n                  >\r\n                    <option value=\"\">Pilih Sub Materi</option>\r\n                    {(Array.isArray(subMateriOptions) ? subMateriOptions : []).map((option) => (\r\n                      <option key={option.id} value={option.id}>\r\n                        {option.title}\r\n                      </option>\r\n                    ))}\r\n                    {subMateriOptions.length === 0 && (\r\n                      <option value=\"\" disabled>\r\n                        Tidak ada materi tersedia\r\n                      </option>\r\n                    )}\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Batas Waktu (menit)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min={1}\r\n                      value={aTimeLimit}\r\n                      onChange={(e) => setATimeLimit(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                      placeholder=\"30\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Nilai Kelulusan (%)</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min={0}\r\n                      max={100}\r\n                      value={aPassingScore}\r\n                      onChange={(e) => setAPassingScore(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                      placeholder=\"70\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"flex items-center gap-2\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={aPublished}\r\n                      onChange={(e) => setAPublished(e.target.checked)}\r\n                      className=\"w-4 h-4 text-blue-600 rounded\"\r\n                    />\r\n                    <span className=\"text-sm font-medium text-gray-700\">Publikasikan kuis</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Questions Section */}\r\n              <div className=\"mt-8\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <h3 className=\"text-md font-semibold text-gray-900\">Soal Kuis ({questions.length})</h3>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={addNewQuestion}\r\n                    className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors\"\r\n                  >\r\n                    <Plus className=\"w-4 h-4\" />\r\n                    Tambah Soal\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Questions List */}\r\n                {questions.length > 0 && (\r\n                  <div className=\"space-y-3 mb-4\">\r\n                    {questions.map((question, index) => (\r\n                      <div key={question.id} className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <h4 className=\"font-medium text-gray-900 mb-2\">\r\n                              Soal {index + 1}: {question.question_text || 'Belum diisi'}\r\n                            </h4>\r\n                            <div className=\"text-sm text-gray-600\">\r\n                              {question.options.filter(opt => opt.trim()).length} opsi jawaban\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2 ml-4\">\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => editQuestion(question.id)}\r\n                              className=\"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\r\n                              title=\"Edit soal\"\r\n                            >\r\n                              <Edit className=\"w-4 h-4\" />\r\n                            </button>\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => deleteQuestion(question.id)}\r\n                              className=\"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                              title=\"Hapus soal\"\r\n                            >\r\n                              <X className=\"w-4 h-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Question Form */}\r\n                {showQuestionForm && editingQuestionId && (() => {\r\n                  const currentEditingQuestion = questions.find(q => q.id === editingQuestionId);\r\n                  if (!currentEditingQuestion) return null;\r\n\r\n                  return (\r\n                    <div className=\"bg-blue-50 rounded-lg p-4 border border-blue-200 mb-4\">\r\n                      <h4 className=\"font-medium text-gray-900 mb-3\">\r\n                        Edit Soal {questions.findIndex(q => q.id === editingQuestionId) + 1}\r\n                      </h4>\r\n\r\n                      <div className=\"space-y-4\">\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-2\">Pertanyaan *</label>\r\n                          <textarea\r\n                            value={currentEditingQuestion.question_text}\r\n                            onChange={(e) => updateQuestion(editingQuestionId!, { question_text: e.target.value })}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\r\n                            rows={3}\r\n                            placeholder=\"Masukkan pertanyaan...\"\r\n                            required\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-2\">Opsi Jawaban *</label>\r\n                          {currentEditingQuestion.options.map((option, optionIndex) => (\r\n                            <div key={optionIndex} className=\"flex items-center gap-2 mb-2\">\r\n                              <input\r\n                                type=\"radio\"\r\n                                name={`correct_${editingQuestionId}`}\r\n                                checked={currentEditingQuestion.correct_answer_index === optionIndex}\r\n                                onChange={() => updateQuestion(editingQuestionId!, { correct_answer_index: optionIndex })}\r\n                                className=\"w-4 h-4 text-blue-600\"\r\n                              />\r\n                              <input\r\n                                type=\"text\"\r\n                                value={option}\r\n                                onChange={(e) => {\r\n                                  const newOptions = [...currentEditingQuestion.options];\r\n                                  newOptions[optionIndex] = e.target.value;\r\n                                  updateQuestion(editingQuestionId!, { options: newOptions });\r\n                                }}\r\n                                className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                                placeholder={`Opsi ${optionIndex + 1}...`}\r\n                              />\r\n                              {currentEditingQuestion.options.length > 2 && (\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => {\r\n                                    const newOptions = currentEditingQuestion.options.filter((_, i) => i !== optionIndex);\r\n                                    const newCorrectIndex = currentEditingQuestion.correct_answer_index >= newOptions.length\r\n                                      ? newOptions.length - 1\r\n                                      : currentEditingQuestion.correct_answer_index;\r\n                                    updateQuestion(editingQuestionId!, {\r\n                                      options: newOptions,\r\n                                      correct_answer_index: newCorrectIndex\r\n                                    });\r\n                                  }}\r\n                                  className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                >\r\n                                  <X className=\"w-4 h-4\" />\r\n                                </button>\r\n                              )}\r\n                            </div>\r\n                          ))}\r\n                          {currentEditingQuestion.options.length < 6 && (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => {\r\n                                const newOptions = [...currentEditingQuestion.options, \"\"];\r\n                                updateQuestion(editingQuestionId!, { options: newOptions });\r\n                              }}\r\n                              className=\"text-blue-600 hover:text-blue-700 text-sm font-medium\"\r\n                            >\r\n                              + Tambah Opsi\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-2\">Penjelasan (opsional)</label>\r\n                          <textarea\r\n                            value={currentEditingQuestion.explanation || \"\"}\r\n                            onChange={(e) => updateQuestion(editingQuestionId!, { explanation: e.target.value })}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\r\n                            rows={2}\r\n                            placeholder=\"Penjelasan jawaban yang benar...\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                              setShowQuestionForm(false);\r\n                              setEditingQuestionId(null);\r\n                            }}\r\n                            className=\"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-lg transition-colors\"\r\n                          >\r\n                            Selesai\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n\r\n              {/* Form Actions */}\r\n              <div className=\"flex items-center gap-3 pt-6 border-t border-gray-200\">\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={aSubmitting}\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow transition-colors disabled:opacity-60\"\r\n                >\r\n                  {aSubmitting ? 'Menyimpan...' : 'Simpan Kuis'}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    resetQuizForm();\r\n                    setShowAdd(false);\r\n                  }}\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg shadow transition-colors\"\r\n                >\r\n                  Batal\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </form>\r\n      )}\r\n\r\n      {/* Edit form section */}\r\n      {showEdit && (\r\n        <form onSubmit={submitEdit} className=\"bg-white rounded-xl p-5 shadow-sm border border-gray-200 mb-6\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Edit {title}</h2>\r\n          {resource === 'materi' ? (\r\n            <div className=\"grid grid-cols-1 gap-4\">\r\n              <div>\r\n                <label className=\"text-sm text-gray-600\">Judul *</label>\r\n                <input value={eTitle} onChange={(e) => setETitle(e.target.value)} className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" placeholder=\"Judul minimal 3 karakter\" required minLength={3} />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-sm text-gray-600\">Konten *</label>\r\n                <textarea value={eContent} onChange={(e) => setEContent(e.target.value)} className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 min-h-32\" placeholder=\"Konten minimal 10 karakter\" required />\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <input id=\"e-published\" type=\"checkbox\" checked={ePublished} onChange={(e) => setEPublished(e.target.checked)} className=\"w-4 h-4\" />\r\n                <label htmlFor=\"e-published\" className=\"text-sm text-gray-700\">\r\n                  Terbitkan\r\n                </label>\r\n              </div>\r\n              <div>\r\n                <button type=\"submit\" disabled={eSubmitting} className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white shadow disabled:opacity-60\">\r\n                  {eSubmitting ? 'Menyimpan...' : 'Simpan Perubahan'}\r\n                </button>\r\n                <button type=\"button\" onClick={() => { setShowEdit(false); setEditingItem(null); }} className=\"ml-2 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 shadow\">\r\n                  Batal\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Judul Kuis *</label>\r\n                <input\r\n                  value={eTitle}\r\n                  onChange={(e) => setETitle(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"Judul minimal 3 karakter\"\r\n                  required\r\n                  minLength={3}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Deskripsi</label>\r\n                <textarea\r\n                  value={eDescription}\r\n                  onChange={(e) => setEDescription(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-none\"\r\n                  placeholder=\"Deskripsi singkat kuis (opsional)\"\r\n                  rows={2}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Sub Materi *</label>\r\n                <select\r\n                  value={eSubMateriId}\r\n                  onChange={(e) => setESubMateriId(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                  required\r\n                >\r\n                  <option value=\"\">Pilih Sub Materi</option>\r\n                  {(Array.isArray(subMateriOptions) ? subMateriOptions : []).map((option) => (\r\n                    <option key={option.id} value={option.id}>\r\n                      {option.title}\r\n                    </option>\r\n                  ))}\r\n                  {subMateriOptions.length === 0 && (\r\n                    <option value=\"\" disabled>\r\n                      Tidak ada materi tersedia\r\n                    </option>\r\n                  )}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Batas Waktu (menit)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min={1}\r\n                    value={eTimeLimit}\r\n                    onChange={(e) => setETimeLimit(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"30\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Nilai Kelulusan (%)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min={0}\r\n                    max={100}\r\n                    value={ePassingScore}\r\n                    onChange={(e) => setEPassingScore(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"70\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"flex items-center gap-2\">\r\n                  <input\r\n                    id=\"eq-published\"\r\n                    type=\"checkbox\"\r\n                    checked={ePublished}\r\n                    onChange={(e) => setEPublished(e.target.checked)}\r\n                    className=\"w-4 h-4 text-blue-600 rounded\"\r\n                  />\r\n                  <span className=\"text-sm font-medium text-gray-700\">Publikasikan kuis</span>\r\n                </label>\r\n              </div>\r\n\r\n              <div>\r\n                <button type=\"submit\" disabled={eSubmitting} className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white shadow disabled:opacity-60\">\r\n                  {eSubmitting ? 'Menyimpan...' : 'Simpan Perubahan'}\r\n                </button>\r\n                <button type=\"button\" onClick={() => { setShowEdit(false); setEditingItem(null); }} className=\"ml-2 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 shadow\">\r\n                  Batal\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </form>\r\n      )}\r\n\r\n      {/* Preview Modal */}\r\n      {showPreview && previewItem && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n            {/* Modal Header */}\r\n            <div className=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\r\n              <h3 className=\"text-xl font-semibold text-gray-900\">\r\n                Preview: {previewItem.title}\r\n              </h3>\r\n              <button\r\n                onClick={() => { setShowPreview(false); setPreviewItem(null); }}\r\n                className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n\r\n            {/* Modal Content */}\r\n            <div className=\"overflow-y-auto flex-1\">\r\n              {previewItem.poinDetails && previewItem.poinDetails.length > 0 ? (\r\n                <MaterialPreview\r\n                  poins={previewItem.poinDetails}\r\n                  materialTitle={previewItem.title}\r\n                />\r\n              ) : (\r\n                <div className=\"px-6 py-8 text-center\">\r\n                  <p className=\"text-gray-500 italic text-lg\">Belum ada poin yang dibuat</p>\r\n                  <p className=\"text-sm text-gray-400 mt-2\">\r\n                    Tambahkan poin pembelajaran untuk melihat preview lengkap\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Modal Footer */}\r\n            <div className=\"px-6 py-4 border-t border-gray-200 flex justify-end\">\r\n              <button\r\n                onClick={() => { setShowPreview(false); setPreviewItem(null); }}\r\n                className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors\"\r\n              >\r\n                Tutup\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200\">\r\n        {/* Header with refresh button */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-gray-900\">{title} Modul {currentModuleName || `#${moduleId}`}</h2>\r\n            <p className=\"text-sm text-gray-500 mt-1\">\r\n              Menampilkan semua {title.toLowerCase()}\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              onClick={onManualRefresh}\r\n              disabled={isRefreshing}\r\n              className=\"inline-flex items-center gap-2 px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50\"\r\n              title=\"Refresh data\"\r\n            >\r\n              <RefreshCw className={`w-4 h-4 ${isRefreshing ? 'animate-spin' : ''}`} />\r\n              {isRefreshing ? 'Memuat...' : 'Refresh'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status Filter & Search */}\r\n        <div className=\"px-4 py-3 border-b border-gray-200\">\r\n          <div className=\"flex items-center justify-between gap-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm font-medium text-gray-700\">Filter Status:</span>\r\n              <div className=\"flex bg-gray-100 rounded-lg p-1\">\r\n                <button\r\n                  onClick={() => setStatusFilter('all')}\r\n                  className={`px-3 py-1 text-xs rounded-md transition-colors ${statusFilter === 'all'\r\n                    ? 'bg-white text-gray-900 shadow-sm'\r\n                    : 'text-gray-600 hover:text-gray-900'\r\n                    }`}\r\n                >\r\n                  Semua ({rows.length})\r\n                </button>\r\n                <button\r\n                  onClick={() => setStatusFilter('published')}\r\n                  className={`px-3 py-1 text-xs rounded-md transition-colors ${statusFilter === 'published'\r\n                    ? 'bg-white text-gray-900 shadow-sm'\r\n                    : 'text-gray-600 hover:text-gray-900'\r\n                    }`}\r\n                >\r\n                  Published ({rows.filter(r => r.published).length})\r\n                </button>\r\n                <button\r\n                  onClick={() => setStatusFilter('draft')}\r\n                  className={`px-3 py-1 text-xs rounded-md transition-colors ${statusFilter === 'draft'\r\n                    ? 'bg-white text-gray-900 shadow-sm'\r\n                    : 'text-gray-600 hover:text-gray-900'\r\n                    }`}\r\n                >\r\n                  Draft ({rows.filter(r => !r.published).length})\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder={`Cari ${title.toLowerCase()}...`}\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              />\r\n              {searchTerm && (\r\n                <button\r\n                  onClick={() => setSearchTerm('')}\r\n                  className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\r\n                  title=\"Clear search\"\r\n                >\r\n                  <X className=\"w-4 h-4\" />\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* DataTable content */}\r\n        <div className=\"p-4\">\r\n          <DataTable<ModuleItemRow>\r\n            title=\"\"\r\n            data={filteredRows}\r\n            columns={columns}\r\n            onAdd={onAdd}\r\n            onEdit={onEdit}\r\n            onDelete={onDelete}\r\n            onView={resource === \"materi\" ? onPreview : undefined}\r\n            onCustomAction={onTambahPoin}\r\n            customActionIcon={<Plus className=\"w-4 h-4\" />}\r\n            customActionTitle={resource === \"materi\" ? \"Tambah Poin\" : \"Tambah Soal\"}\r\n            customActionColor=\"purple-600\"\r\n            searchPlaceholder={searchPlaceholder}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3874, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus%20TUF%20Gaming/Documents/KULIAH/Pengabdian%20Website%20Posyandu/bukadita_backoffice/src/app/admin/modul/%5Bid%5D/kuis/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport ModuleItemsPage from \"@/components/admin/shared/ModuleItemsPage\";\r\n\r\nexport default function ModulKuisPage() {\r\n  const params = useParams();\r\n  const moduleId = String(params?.id || \"\");\r\n  return <ModuleItemsPage moduleId={moduleId} resource=\"kuis\" />;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,SAAS,IAAA,8NAAS;IACxB,MAAM,WAAW,OAAO,QAAQ,MAAM;IACtC,qBAAO,6TAAC,kPAAe;QAAC,UAAU;QAAU,UAAS;;;;;;AACvD","debugId":null}}]
}